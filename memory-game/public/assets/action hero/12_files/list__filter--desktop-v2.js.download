!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="./",n(n.s=932)}({248:function(e,t){RView.filter=function(e){var t=null,n={};e.displayModal=null;var i=function(){for(var e,t=function(e,t){if(!(e=e.split("--")[1]))return!0;switch(e.toUpperCase()){case"MEN":case"WOMEN":if(!RUser.interest.getProperty("gender")||"NONE"===RUser.interest.getProperty("gender")&&(void 0===RUser.interest.getProperty("hideDemographics")||RUtils.date.getDateAge(RUser.interest.getProperty("hideDemographics"),Date.now(),"d")>0))return!0;break;case"AGE":case"GENXERS":case"MILLENIALS":case"GENZS":case"BABYBOOMERS":if(!RUser.interest.getProperty("ageGroup")&&(void 0===RUser.interest.getProperty("hideDemographics")||RUtils.date.getDateAge(RUser.interest.getProperty("hideDemographics"),Date.now(),"d")>0))return!0;break;case"REGION":case"INTERNATIONAL":case"MIDWESTUS":case"MOUNTAINUS":case"NORTHEASTERNUS":case"SOUTHERNUS":case"WESTCOASTUS":if(!RUser.interest.getProperty("region")&&(void 0===RUser.interest.getProperty("hideDemographics")||RUtils.date.getDateAge(RUser.interest.getProperty("hideDemographics"),Date.now(),"d")>0))return!0;break;default:if(!t)return!1;if(!RUser.interest.getProperty("interest".concat(t))&&(void 0===RUser.interest.getProperty("hideInterests")||void 0===RUser.interest.getProperty("hideInterests")[t]||RUtils.date.getDateAge(RUser.interest.getProperty("hideInterests")[t],Date.now(),"d")>0))return!0}return!1},n=function(e){requestAnimationFrame(function(){e.parentNode.removeChild(e)})},i=document.getElementsByClassName("filterButton"),r=0;e=i[r];r++){var s=(e.getAttribute("data-filter-params")||"").parseQueryString(),o=t(e.id,s.groupId);(s.showable||"false").parseBoolean()||o||"listFilter__cancelBtn"===e.id||n(e)}},r=function(){var t=!1,n=!1,r=function(t){t&&(RUtils.console.info("$filter","Display ".concat(t.toLowerCase()," modal :D")),e.displayModal=t,i(),RUtils.postMessage.emit("FILTER_CONFIG_READY"))};!function(){for(var i,r=0;(i=e.getStore()[r])&&(n||"DEMOGRAPHIC"!==i.groupType||(n=!0),t||"DEMOGRAPHIC"===i.groupType||(t=!0),!n||!t);r++);}(),!RUser.interest.getProperty("gender")&&RUser.profile.getProperty("gender")&&RUser.interest.setProperty("gender",RUser.profile.getProperty("gender")),function(){if(!RUser.interest.getProperty("ageGroup")&&RUser.profile.getProperty("age")){var e=RUtils.getDOB(RUser.profile.getProperty("age")).ageGroup;e&&RUser.interest.setProperty("ageGroup",e)}}(),function(){if(!RUser.interest.getProperty("region")&&(RUser.profile.getProperty("state")||RUser.profile.getProperty("countryCode"))){"US"!==RUser.profile.getProperty("countryCode")&&RUser.profile.setProperty("state","INTERNATIONAL");var e=RUtils.getRegion(RUser.profile.getProperty("state"));e&&RUser.interest.setProperty("region",e)}}(),!RList.listOptions.showInterests||!t||RUser.interest.getProperty("interest".concat(RView.interest.store.groupId))||void 0!==RUser.interest.getProperty("hideInterests")&&void 0!==RUser.interest.getProperty("hideInterests")[RView.interest.store.groupId]&&RUtils.date.getDateAge(RUser.interest.getProperty("hideInterests")[RView.interest.store.groupId],Date.now(),"d")<0?!(void 0===RUser.interest.getProperty("hideDemographics")||RUtils.date.getDateAge(RUser.interest.getProperty("hideDemographics"),Date.now(),"d")>=0)||RUser.interest.getProperty("ageGroup")&&RUser.interest.getProperty("region")?(RUtils.console.info("$filter","We have all the data, display no modal."),i(),RUtils.postMessage.emit("FILTER_CONFIG_READY")):r("DEMOGRAPHIC"):RList.listOptions.showInterests&&"GUEST"!==RUser.profile.getProperty("type")&&RUser.profile.getProperty("id")?RUtils.ajax({method:"GET",headers:{"Content-type":"application/json"},url:"".concat(RConstants.cachedApiPath,"/users/").concat(RUser.profile.getProperty("id"),"/interests"),callback:function(e){for(var t,n=0;t=e[n];n++)"Gender"!==t.group.name&&"Age"!==t.group.name&&"Region"!==t.group.name&&RUser.interest.setProperty("interest".concat(t.group.groupId),t.option.optionId);RUser.interest.getProperty("interest".concat(RView.interest.store.groupId))?r("DEMOGRAPHIC"):r("INTEREST")}}):r("INTEREST")};return e.getStore=function(){return n},e.getFilter=function(){return t},e.setFilter=function(e){return t=e},RUtils.ajax({method:"GET",headers:{"Content-type":"application/json"},url:"".concat(RConstants.cachedApiPath,"/lists/").concat(RList.id,"/interests"),callback:function(e){var t;!(t=e)||t.length<1||(n=t),RList.listOptions.showInterests?RUtils.postMessage.handle("INTEREST_STORE_COMPLETE",r):r()}}),e}(RView.filter||{})},249:function(e,t){RView.filter=function(e){var t=window.setTimeout,n=window.requestAnimationFrame||t;e.FILTER_HIGHLIGHTED_CLASS="filterButton--isHighlighted",e.FILTER_SELECTED_CLASS="filterButton__item--isSelected";var i=function(e,t){var n=document.getElementsByClassName("filterButton");if(n)for(var i,r=0;i=n[r];r++)""!==i.getAttribute("data-filter-selected")&&i.setAttribute("data-filter-selected","");e&&e.setAttribute("data-filter-selected",t)},r=function(t){t.addEventListener("click",function(){var n=function(e){if(e){var t=e.getAttribute("data-filter-params").parseQueryString(),n="listFilter__".concat(t.type.toLowerCase(),"Btn");return t.type!==t.name&&(n+="--".concat(t.name.toLowerCase())),n}}(t),r=t.innerHTML;RUtils.dropdown.close(),e.setFilter(r),i(document.getElementById(n),r),e.setElemClass(e.FILTER_SELECTED_CLASS,t),e.setSelectedText(document.getElementById(n).getElementsByClassName("listFilter__selectedText")[0])},!1)},s=function(t){t.addEventListener("click",function(){var n=t.classList.contains("filterButton--isUserInterest")||t.classList.contains("filterButton__item--isUserInterest"),i=(t.getAttribute("data-filter-params")||"").parseQueryString();RView.interest&&RView.interest.store&&(n||"DEMOGRAPHIC"===e.displayModal&&"listFilter__cancelBtn"!==t.id&&"RERANK"!==i.type)&&e.clickInterestButton(n),RConstants.isMobile&&RView.nav.displaySiteNav(),function(t){var n=(t.getAttribute("data-filter-params")||"").parseQueryString();switch(RView.trivia&&RView.trivia.closeAll(),RView.searchList&&RView.searchList.clearSearch(!0),RUtils.sticky.destroy("filterInterest"),e.setElemClass(e.FILTER_SELECTED_CLASS,t),n.type){case"INTEREST":e.displayInterest(n);break;case"RERANK":e.displayRerank(n);break;default:e.clear()}RUser.data.setProperty("day30GridSearch",RUser.data.getProperty("day30GridSearch")+1)}(t)},!1)};return e.applyItems=function(t,i){i=i||{};var r=document.getElementById("list");if(r){var s={};"INTEREST"===i.type&&(s.hideVoteButtons=!0),i.clearResults?(s.clearResults=!0,s.hideInlineAds=!0):(s.clearResults=!0,s.hideAllAds=!0);var o=RView.displayGridListItems(t,s);e.removeDOMElements("loadMore__container"),n(function(){r.appendChild(o.items),i.clearResults&&RList.listOptions.voteRanked?r.classList.add("list--voteRanked"):i.clearResults||r.classList.remove("list--voteRanked"),e.calcFilterTrigger&&e.calcFilterTrigger(),i.clearResults&&(e.hideItems(document.getElementsByClassName("button__pagination")),e.hideItems(document.getElementsByClassName("button__pagination--start"),!0),RUtils.postMessage.emit("LOADMORE_RESET",i)),RUtils.postMessage.emit("LOADMORE_COMPLETE",i.clearResults?{updateVotes:!0}:null)})}},e.displaySticky=function(){n(function(){var e=document.getElementById("sticky__filterInterest");if(e.style.display="block",RConstants.isMobile){var t=document.documentElement.clientWidth;e.style.left="50%",e.style.marginLeft=t<400?"-".concat((t-20)/2,"px"):"-190px"}RConstants.isMobile||n(function(){var t=e.getBoundingClientRect(),n=document.getElementById("stickyArrow__filterInterest");n.style.display="block",n.style.top="".concat(t.top+RConstants.windowScrollTop-15,"px"),n.style.left="".concat(t.left+40,"px")})})},e.createSticky=function(t,n,i){if(document.getElementById("sticky__filterInterest"))RUtils.console.error("$filter","Sticky already exists, returning.");else if(t){i=i||null,RUtils.sticky.create(t,RConstants.isMobile?null:i);var r=i&&i.classList.contains("filterButton--isUserInterest");(r&&"INTEREST"!==e.displayModal||!r&&"DEMOGRAPHICS"!==e.displayModal)&&e.displaySticky()}else RUtils.console.error("$filter","No options passed to sticky, returning.")},e.setElemClass=function(e,t){if(e){for(var i,r=function(e,t){n(function(){e.classList.remove(t)})},s=document.getElementsByClassName(e),o=0;i=s[o];o++)r(i,e);t&&n(function(){t.classList.add(e)})}},e.setSelectedText=function(t){var i=function(e,t){n(function(){e.textContent=t})},r=document.getElementsByClassName("listFilter__selectedText");if(r.length)for(var s,o=0;s=r[o];o++)s.classList.contains("listFilter__selectedText--rerank")?i(s,": ".concat(RList.rerankCount)):i(s,"");t&&i(t,": ".concat(e.getFilter()))},e.scrollToFirstListItem=function(){var e=document.getElementsByClassName("list__description")[0],t=document.getElementById("listFilter");e&&n(function(){var n=e.getBoundingClientRect().bottom,i=RConstants.isMobile?0:document.getElementById("commonNav").getBoundingClientRect().height,r=RConstants.isMobile?t.getBoundingClientRect().height:0,s=document.getElementById("ticker");s=s?s.getBoundingClientRect().height:0;var o=n+RConstants.windowScrollTop-i-r-s;window.scrollTo(0,o)})},e.hideItems=function(e,t){if(t=t||!1,e)for(var i,r=function(e,t){n(function(){e.style.display=t})},s=0;i=e[s];s++)r(i,t?"none":"block")},e.showSpinner=function(){var e=RConstants.isMobile?document.getElementsByClassName("list__description")[0]:document.getElementsByClassName("listFilter")[0];e&&(RUtils.spinner.destroy("filter"),n(function(){e.insertAdjacentHTML("afterend",RUtils.spinner.create("filter"))}))},e.setClearBtn=function(t){t=t||!1;var i=document.getElementById("listFilter__cancelBtn"),r=document.getElementById("listFilter__rerankBtnSelected");i&&i.setAttribute("data-filter-ready",t),r&&n(function(){r.innerHTML=": ".concat(RList.rerankCount)}),e.setSelectedText()},e.findMenuItemsToBind=function(){var e=document.getElementsByClassName("filterButton__item");if(e)for(var t,n=0;t=e[n];n++)r(t)},e.clear=function(){var t=document.getElementById("listFilter__cancelBtn");t&&(t=t.getAttribute("data-filter-ready").parseBoolean()),t&&(e.setClearBtn(),e.scrollToFirstListItem(),e.showSpinner(),e.removeDOMElements(),RUtils.modal.destroy("listItemPopup"),e.setElemClass(RView.filter.FILTER_SELECTED_CLASS),e.setElemClass(RView.filter.FILTER_HIGHLIGHTED_CLASS,document.getElementById("listFilter__cancelBtn")),i(),e.setSelectedText(),RUtils.ajax({method:"GET",url:"".concat(RConstants.cachedApiPath,"/lists/").concat(RList.id,"/items?limit=25&offset=0")+"&include=votes,wikiText,rankings,openListItemContributors&propertyFetchType=ALL",callback:function(t){t.listItems.length>0&&(RUtils.spinner.destroy("filter"),e.applyItems(t,{clearResults:!0}),e.hideItems(document.getElementsByClassName("ive__create")))}}))},e.handler=function(){var e=document.getElementsByClassName("$filter");if(e.length)for(var t,n=0;t=e[n];n++)t.getAttribute("data-filter-bound")||(t.setAttribute("data-filter-bound",!0),s(t))},e.handler(),e}(RView.filter||{})},250:function(e,t){var n,i;RView.filter=(n=RView.filter||{},i=function(e,t){e&&requestAnimationFrame(function(){e.appendChild(t),n.handler(),n.findMenuItemsToBind()})},n.createMenuItems=function(e,t){for(var n,r=function(e,t){if(!e)return RUtils.console.error("$filter","No name to check against, returning."),!0;switch(e.replace(/ /g,"").toUpperCase()){case"GENXERS":case"MILLENIALS":case"GENZS":case"BABYBOOMERS":return!RUser.interest.getProperty("ageGroup")&&(void 0===RUser.interest.getProperty("hideDemographics")||RUtils.date.getDateAge(RUser.interest.getProperty("hideDemographics"),Date.now(),"d")>0);case"INTERNATIONAL":case"MIDWESTUS":case"MOUNTAINUS":case"NORTHEASTERNUS":case"SOUTHERNUS":case"WESTCOASTUS":return!RUser.interest.getProperty("region")&&(void 0===RUser.interest.getProperty("hideDemographics")||RUtils.date.getDateAge(RUser.interest.getProperty("hideDemographics"),Date.now(),"d")>0);default:return!!t&&!RUser.interest.getProperty("interest".concat(t))&&(void 0===RUser.interest.getProperty("hideInterests")||void 0===RUser.interest.getProperty("hideInterests")[t]||RUtils.date.getDateAge(RUser.interest.getProperty("hideInterests")[t],Date.now(),"d")>0)}},s=function(t){var n=document.createElement("span");return n.className="filterButton__item ".concat("USER"===e.name?"filterButton__item--isUserInterest ":"").concat(t.isOwn?"filterButton__item--isOwn ":"","block white rnkrDBlueBg pointer $filter $tke"),n.setAttribute("data-filter-params","type=".concat(e.type,"&name=").concat(e.name,"&id=").concat(t.optionId?t.optionId:t.data.id).concat(e.groupId?"&groupId=".concat(e.groupId):"")),n.setAttribute("data-tke-params","category=list&action=filter_select_".concat(e.type.toLowerCase())),"RERANK"===e.type?n.innerHTML=t.isOwn?"my rerank":t.data.user.userName:n.textContent=t.displayName?t.displayName:t.name,n},o=document.createDocumentFragment(),a=0;n=t[a];a++){var l=r(n.name,e.groupId);"RERANK"!==e.type&&!l&&n.totalItems<1&&("INTEREST"===e.type&&!e.groupId&&"DEMOGRAPHIC"!==RView.interest.closeModal||e.groupId&&"INTEREST"!==RView.interest.closeModal)||o.appendChild(s(n))}i(e.elem,o)},n.displayInterestUserItems=function(e){if(n.getStore().length){for(var t,i=0;t=n.getStore()[i];i++)if("MULTIPLE_CHOICE"===t.groupType){n.createMenuItems({elem:e,type:"INTEREST",name:"USER",groupId:t.groupId},t.options);break}}else RUtils.console.warn("$filter","No interest, returning.")},n)},932:function(e,t,n){n(248),n(249),n(250),n(933),n(934),n(935),n(936),n(937),n(938),e.exports=n(939)},933:function(e,t,n){},934:function(e,t){var n,i,r,s;RView.filter=(n=RView.filter||{},i=window.setTimeout,r=window.requestAnimationFrame||i,s=!1,n.clickInterestButton=function(e){!s&&(!e&&"DEMOGRAPHIC"===n.displayModal||e&&"INTEREST"===n.displayModal)&&(s=!0,i(function(){RUtils.postMessage.emit("INTEREST_BUTTON_CLICK",{isUserInterest:e})},200))},n.removeDOMElements=function(e){var t=function(e){r(function(){e.remove()})},n=function(e){if(e)for(var n,i=e.length-1;n=e[i];i--)t(n)},i=document.getElementById("list");i&&(e?n(i.getElementsByClassName(e)):(n(i.getElementsByClassName("listItem__h2--grid")),n(i.getElementsByClassName("inline__contentBlock")),n(i.getElementsByClassName("listItem__rightRail--grid")),n(i.getElementsByClassName("ad__adunit--listItem-grid")),n(i.getElementsByClassName("loadMore__container"))))},n)},935:function(e,t){var n,i,r;RView.filter=(n=RView.filter||{},i=[],r=function(e,t){if(t&&n.getStore().length){for(var i,r=0;i=n.getStore()[r];r++)if(i.name.toLowerCase()===t.toLowerCase()){n.createMenuItems({elem:e,type:"INTEREST",name:t},i.options);break}}else RUtils.console.warn("Filters : No interest, returning.")},n.displayRerankItems=function(e){i.length?n.createMenuItems({elem:e,type:"RERANK",name:"RERANK"},i):("GUEST"!==RUser.profile.getProperty("type")&&RUtils.ajax({method:"GET",url:"".concat(RConstants.cachedApiPath,"/lists/").concat(RList.id,"/reranks/").concat(RUser.profile.getProperty("id")),callback:function(e){e&&i.push({data:e,isOwn:!0})}}),RUtils.ajax({method:"GET",url:"".concat(RConstants.apiPath,"/lists/").concat(RList.id,"/reranks"),callback:function(t){if(t.rankerLists.length>0){for(var r,s=0;r=t.rankerLists[s];s++)"GUEST"!==RUser.profile.getProperty("type")&&r.user.id===RUser.profile.getProperty("id")||i.push({data:r,isOwn:!1});n.createMenuItems({elem:e,type:"RERANK",name:"RERANK"},i)}}}))},n.displayInterestRegionItems=function(e){r(e,"REGION")},n.displayInterestAgeItems=function(e){r(e,"AGE")},n)},936:function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i;RView.filter=((i=RView.filter||{}).displayRerank=function(e){e&&"object"===n(e)&&function(e){i.scrollToFirstListItem(),i.showSpinner(),i.removeDOMElements(),i.hideItems(document.getElementsByClassName("ive__create"),!0),i.hideItems(document.getElementsByClassName("button__pagination"),!0),i.setClearBtn(!0);var t=document.getElementById("listFilter__rerankBtn");t&&i.setElemClass(i.FILTER_HIGHLIGHTED_CLASS,t),RUtils.modal.destroy("listItemPopup"),RView.list.getNodeOptions&&RView.nodeOptions.closeAllMenu(),setTimeout(function(){RUtils.ajax({method:"GET",url:"".concat(RConstants.cachedApiPath,"/lists/").concat(e.id,"/items?include=votes,wikiText,rankings,openListItemContributors&propertyFetchType=ALL"),error:function(){alert("This rerank could not be loaded"),RUtils.console.warn("Filters : Rerank user not found, returning to non-filtered state"),i.clear()},callback:function(e){e.listItems.length>0&&(RUtils.spinner.destroy("filter"),i.applyItems(e))}})},2e3)}(e)},i)},937:function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i;RView.filter=((i=RView.filter||{}).displayInterest=function(e){e&&"object"===n(e)&&function(e){var t=function(e,t,n){i.clear(),i.createSticky({id:"filterInterest",title:"STILL GATHERING DATA",content:"Not enough voters have told us that they are part of this group, so we can't provide an accurate ranking. Please check back soon!",origin:"element",arrowPosition:["top","left"],elementPosition:["bottom","left"]},e,t),RUtils.console.warn("$filter","Interest filter not found, returning to non-filtered state",n)};i.hideItems(document.getElementsByClassName("ive__create"),!0),i.hideItems(document.getElementsByClassName("button__pagination"),!0),i.scrollToFirstListItem(),i.showSpinner(),i.removeDOMElements(),RUtils.modal.destroy("listItemPopup"),i.setClearBtn(!0);var n=document.getElementById("listFilter__interestBtn--".concat(e.name.toLowerCase()));n&&i.setElemClass(i.FILTER_HIGHLIGHTED_CLASS,n),RView.nodeOptions&&RView.nodeOptions.closeAllMenu(),setTimeout(function(){RUtils.ajax({method:"GET",url:"".concat(RConstants.cachedApiPath,"/lists/").concat(RList.id,"/items?include=votes,wikiText,rankings,openListItemContributors&propertyFetchType=ALL&listViewTypeId=").concat(e.id),error:function(i){t(e.groupId,n,i)},callback:function(r){r.listItems.length?(RUtils.spinner.destroy("filter"),i.applyItems(r,e)):t(e.groupId,n,r)}})},2e3)}(e)},i)},938:function(e,t,n){},939:function(e,t){RView.searchList=function(e){var t,n,i=window.setTimeout,r=window.requestAnimationFrame||i,s=!1,o="",a=!1,l=null,c=[],d=function(){var e=document.getElementsByClassName("list__description")[0];e&&r(function(){var t=e.getBoundingClientRect().bottom,n=document.getElementById("commonNav").getBoundingClientRect().height,i=document.getElementById("ticker");i=i?i.getBoundingClientRect().height:0;var r=t+RConstants.windowScrollTop-n-i;window.scrollTo(0,r)})},u=function(e){e&&r(function(){e.remove()})},p=function(e,t,n){e&&n&&("ADD"===e?r(function(){t.classList.add(n)}):"REMOVE"===e&&r(function(){t.classList.remove(n)}))},m=function(){var e=document.getElementsByClassName("listFilter")[0];e&&(RUtils.spinner.destroy("search"),r(function(){e.insertAdjacentHTML("afterend",RUtils.spinner.create("search"))}))},f=function(e,t){if(e){var n=document.getElementsByClassName(e);if(n)for(var i,r=0;i=n[r];r++)p("REMOVE",i,e);t&&p("ADD",t,e)}},g=function(){var e=function(e){if(e)for(var t,n=e.length-1;t=e[n];n--)u(t)},t=document.getElementById("list");t&&(e(t.getElementsByClassName("listItem__h2--grid")),e(t.getElementsByClassName("listItem__rightRail--grid")),e(t.getElementsByClassName("ad__adunit--listItem-grid")),e(t.getElementsByClassName("inline__contentBlock")),e(t.getElementsByClassName("loadMore__container")))},y=function(e){var t=document.getElementsByClassName("ive__create")[0],n=document.getElementsByClassName("button__pagination")[0];e?(t&&r(function(){t.style.display="none"}),n&&r(function(){n.style.display="none"})):(t&&r(function(){t.style.display="block"}),n&&r(function(){n.style.display="block"}))},R=function(e,t){t=t||!1;var n=document.getElementById("list");n&&r(function(){if(RUtils.spinner.destroy("search"),n.appendChild(RView.displayGridListItems(e,{hideAllAds:!0,isListSearch:!0}).items),!t){var i=document.getElementById("pagination");i&&r(function(){i.style.display="block",RUtils.postMessage.emit("LOADMORE_RESET")})}RUtils.postMessage.emit("LOADMORE_COMPLETE")})};e.clearSearch=function(e){if(e){var t=document.getElementById("search__listInput");return t&&""!==t.value&&r(function(){t.value=""}),void f("propertyButton--isHighlighted")}var n=document.getElementById("pagination");n&&r(function(){n.style.display="none"});var i=document.getElementById("listFilter__cancelBtn");i?(f(RView.filter.FILTER_HIGHLIGHTED_CLASS,i),f("propertyButton--isHighlighted")):(i=document.getElementById("search__original"),f("propertyButton--isHighlighted",i)),RView.trivia&&RView.trivia.closeAll(),m(),g(),f("propertyButton__item--isSelected"),RUtils.modal.destroy("listItemPopup"),RUtils.ajax({method:"GET",url:"".concat(RConstants.cachedApiPath,"/lists/").concat(RList.id,"/items?limit=25&offset=0")+"&include=votes,wikiText,rankings,openListItemContributors&propertyFetchType=ALL",callback:function(e){if(e.listItems.length>0){var t=document.getElementById("search__listInput");t&&""!==t.value&&r(function(){t.value=""}),RUtils.spinner.destroy("search"),R(e),y(!1),d()}}})};var E=function(e){i(function(){var t=n.getBoundingClientRect();RUtils.modal.create({id:"search__list--noResults",modal:!0,width:"325px",height:"110px",style:"transparent",classes:"robotoL fixed visible",content:"SPELLING"===e?"Maybe check your spelling and try again?":"Sorry we need at least 2 characters before we can find the item you're looking for",title:"We can't find a match for that",left:"".concat(t.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft),"px"),top:"".concat(t.top+40,"px"),restrictScroll:!0})},250)},h=function(e){e=e||"",RUtils.ajax({method:"GET",url:"".concat(RConstants.cachedApiPath,"/lists/").concat(RList.id,"/items/_search?term=").concat(encodeURI(e),"&type=").concat(t&&"undefined"!==t?"PROPERTY&propertyId=".concat(t):"NAME","&include=votes,wikiText"),error:function(){E("SPELLING")},callback:function(e){e.length?(RView.filter&&r(function(){RView.filter.setElemClass(RView.filter.FILTER_HIGHLIGHTED_CLASS),RView.filter.setClearBtn(!0)}),RView.trivia&&RView.trivia.closeAll(),RView.list.getNodeOptions&&RView.nodeOptions.closeAllMenu(),p("ADD",n,"propertyButton--isHighlighted"),d(),g(),y(!0),m(),f("propertyButton--isHighlighted",n),RUtils.modal.destroy("listItemPopup"),R({listItems:e},!0)):E("SPELLING")}})},I=function(t){var a=document.getElementsByClassName("listFilter")[0],d=document.getElementById("listFilter__cancelBtn"),u="";d||(u+="".concat('<span class="search__original--title inlineBlock robotoC">list ordered by</span><button id="search__original" class="propertyButton--isHighlighted pointer lowercase inlineBlock">').concat(RList.listOptions.voteRanked?"all voters":"original order","</button>")),u+="".concat('<span class="search__list relative"><button id="search__listButton" class="propertyButton ').concat(t&&c.length>1?"propertyButton--hasItems $ddm ":"",'relative inlineBlock float pointer lowercase" ')+'data-filter-options="type=NAME"',t&&c.length>1&&(u+=' data-ddm-options="width=200px&height=auto&restrictScroll=true&position=fixed" data-ddm-callback="RView.searchList.updateProperty"'),u+=">".concat(""!==o?o:"item name","</button>")+'<input id="search__listInput" class="'.concat(t&&c.length>1?"pointer ":"",'relative inlineBlock lowercase" type="text" value="" ')+'placeholder="search list"/><svg id="search__listIcon" class="rsvg absolute pointer $tke" data-tke-params="category=list&action=filter_select_search"><use xlink:href="#rsvg__ui--search"></use></svg></span>',a&&r(function(){a.insertAdjacentHTML("beforeend",u),n=document.getElementById("search__listButton"),function(){if(!s){var t=document.getElementById("search__listInput"),o=document.getElementById("search__listIcon"),a=document.getElementById("search__original");t&&t.addEventListener("keyup",function(n){clearTimeout(l),l=i(function(){0!==t.value.length||13!==n.which&&8!==n.which?13===n.which&&(1===t.value.length?E("CHARACTERS"):t.value.length>1&&h(t.value)):e.clearSearch()},500)}),o&&o.addEventListener("click",function(){clearTimeout(l),l=i(function(){t.value.length?t.value.length>1?(h(t.value),f("propertyButton--isHighlighted",n)):E("CHARACTERS"):RUtils.console.warn("Search:","No input value, skipping search.")},500)}),a&&a.addEventListener("click",function(){""!==t.value&&(r(function(){t.value=""}),e.clearSearch(),f("propertyButton--isHighlighted",a))}),s=!0}}()})},_=function(e){e.addEventListener("click",function(){RView.trivia&&RView.trivia.closeAll(),f("propertyButton__item--isSelected",e),r(function(){!function(e){var i=document.getElementsByClassName("propertyButton__item--search propertyButton__item--isSelected")[0],s=(e.getAttribute("data-filter-options")||"").parseQueryString();i&&(t=parseInt(s.id,10),r(function(){n.textContent=i.textContent,i.style.display="none"}),RUtils.dropdown.close())}(e)}),RUser.data.setProperty("day30GridSearch",RUser.data.getProperty("day30GridSearch")+1)},!1)},v=function(e,t){r(function(){e.insertAdjacentHTML("beforeend",t),r(function(){!function(){var e=document.getElementsByClassName("propertyButton__item--search");if(e.length)for(var t,n=0;t=e[n];n++)t.getAttribute("data-filter-completed")||(t.setAttribute("data-filter-completed","true"),_(t))}()})})},B=function(){"10597"!==RList.classId?RUtils.ajax({url:"".concat(RConstants.apiPath,"/classes/").concat(RList.classId,"/configuration"),callback:function(e){e.error||(o=e.pluralName),RList.listOptions.alwaysDisplayProperties?a||RUtils.ajax({url:"".concat(RConstants.apiPath,"/lists/").concat(RList.id,"/configuration"),method:"GET",callback:function(e){if(e){for(var t,n=0;t=e.classPropertyConfigurations[n];n++)!0===t.shown&&(c.push(t),a=!0);I(a)}else I(a)}}):I(a)}}):I(a)};return e.updateProperty=function(t){t?(!function(e){var t=document.getElementById("search__listButton").innerText,n=document.getElementById("propertyButton__item--name"),i="".concat('<span id="propertyButton__item--name" class="propertyButton__item propertyButton__item--search block white rnkrDBlueBg lowercase pointer $tke" data-filter-options="type=PROPERTY&id=undefined" data-tke-params="category=list&action=filter_select_rerank">').concat(""!==o?o:"item name","</span>");n||"item name"===t||t===o.toLowerCase()||r(function(){e.insertAdjacentHTML("beforeend",i)})}(t),e.init(t),p("ADD",t,"propertyButton--isOpen")):RUtils.console.warn("Search Callback : Invalid elem, returning.")},e.init=function(e){a?function(e){for(var n,i="",r=0;n=c[r];r++)t!==n.classProperty.id&&(i+='<span id="propertyButton__item--'.concat(n.displayName.replace(/ /gi,"_").toLowerCase(),'" ')+'class="propertyButton__item propertyButton__item--search block white rnkrDBlueBg lowercase pointer $tke" '+'data-filter-options="type=PROPERTY&id='.concat(n.classProperty.id,'" ')+'data-tke-params="category=list&action=filter_select_property">'.concat(n.displayName,"</span>"));v(e,i)}(e):B()},parseInt(RList.listStats.totalItems,10)>24&&!RList.listOptions.showInterests&&e.init(),e}(RView.searchList||{})}});