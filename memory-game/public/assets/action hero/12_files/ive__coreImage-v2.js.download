!function(e){function t(t){for(var a,o,c=t[0],s=t[1],l=t[2],m=0,d=[];m<c.length;m++)o=c[m],n[o]&&d.push(n[o][0]),n[o]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);for(u&&u(t);d.length;)d.shift()();return r.push.apply(r,l||[]),i()}function i(){for(var e,t=0;t<r.length;t++){for(var i=r[t],a=!0,c=1;c<i.length;c++){var s=i[c];0!==n[s]&&(a=!1)}a&&(r.splice(t--,1),e=o(o.s=i[0]))}return e}var a={},n={"ive__coreImage-v2":0},r=[];function o(t){if(a[t])return a[t].exports;var i=a[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=a,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(i,a,function(t){return e[t]}.bind(null,a));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="./";var c=window.webpackJsonp=window.webpackJsonp||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=s;r.push([1040,"vendor-v2"]),i()}({1040:function(e,t,i){i(126),i(127),i(128),i(129),i(130),i(131),i(132),e.exports=i(133)},126:function(e,t,i){},127:function(e,t,i){},128:function(e,t,i){},129:function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a;RView.IVE=((a=RView.IVE).imageTranslate=function(e,t){if(e&&"object"===i(e)){if(e instanceof HTMLElement||e instanceof Element){var a=e,n=a.style.width.replace("px",""),r=a.style.height.replace("px",""),o=a.style.float,c=a.alt;(e=function(e){var t=e.getAttribute("data-ive-options");return t=t&&""!==t&&"undefined"!==t?t.parseQueryString():{}}(e)).width=""!==n?n:a.width,e.height=""!==r?r:a.height,e.float=""!==o?o:"none",e.alt=c||"".concat(R[t].name," image")}else e.listId=t,e.alt="".concat(R[t].name," image");if(e.listId){var s,l;if(e.imageNumber)return e={listId:e.listId,imageNumber:e.imageNumber,width:e.width?e.width:"250",height:e.height&&"0"!==e.height?e.height:"auto",float:e.float?e.float:"none",alt:e.alt.replace(/"/g,"")},s=e,(l=document.createElement("span")).className="listArticle__image listArticle__imageHolder $img",l.style.width="".concat(s.width,"px"),l.style.height="".concat(s.height,"px"),l.style.float=s.float,l.setAttribute("data-ive-options","listId=".concat(s.listId,"&imageNumber=").concat(s.imageNumber,"&width=").concat(s.width,"&height=").concat(s.height,"&float=").concat(s.float,"&alt=").concat(s.alt)),l.innerText="Article Image",l;RUtils.console.error("IVE","Image translator error, image number missing.")}else RUtils.console.error("IVE","Image translator error, list ID missing.")}else RUtils.console.error("IVE","Image translator error, incorrect object sent.")},a)},130:function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a;RView.IVE=((a=RView.IVE).processNewImage=function(e,t,n){var r,o;switch(t.imageType=t.imageType.toUpperCase(),t.uploadType=t.uploadType.toUpperCase(),t.uploadType){case"FILE":r="image";break;case"URL":r="fileUrl";break;default:return RUtils.console.warn("IVE","Unknown upload type, skipping."),a.imagePreviewDestroy(),!1}var c=new FormData;switch(c.append(r,e),t.imageType){case"ARTICLE":o="".concat(RConstants.uploadsPath,"/lists/").concat(t.listId,"/article_image"),c.append("listId",t.listId);break;case"LIST":var s="/image";t.isEditorial&&(s="/editorial_image"),o="".concat(RConstants.uploadsPath,"/lists/").concat(t.listId).concat(s),c.append("listId",t.listId);break;case"NODE":o="".concat(RConstants.uploadsPath,"/lists/").concat(t.listId,"/items/").concat(t.nodeId,"/image"),c.append("listId",t.listId),c.append("nodeId",t.nodeId);break;case"PROFILE":o="".concat(RConstants.uploadsPath,"/users/").concat(t.userId,"/image"),c.append("userId",t.userId);break;default:return RUtils.console.warn("IVE","Unknown image type, skipping."),a.imagePreviewDestroy(),!1}RUtils.ajax({method:"POST",url:o,data:c,withCredentials:!1,headers:{"Content-Type":"multipart/form-data",Accept:"application/json, text/javascript, */*"},error:function(e){RUtils.console.error("IVE","Image upload error",e),alert("".concat(JSON.parse(e.response).message,". Please try again.")),a.imagePreviewDestroy()},callback:function(r){if("object"!==i(e)&&(e={}),e.original={image:r.resource.image,width:r.resource.width,height:r.resource.height},e.attribution=n,e.original.width<("LIST"===t.imageType?870:250))return alert("Sorry, your image isn't wide enough. Please try uploading an image that is at least ".concat("LIST"===t.imageType?870:250,"px wide.")),a.imagePreviewDestroy(),!1;a.imagePreviewCreate(e,t)}})},a.processCroppedImage=function(e,t){var i,n=new FormData;switch(n.append("fileUrl",e.original.image),t.imageType.toUpperCase()){case"ARTICLE":i="".concat(RConstants.uploadsPath,"/lists/").concat(t.listId,"/article_image"),n.append("listId",t.listId);break;case"LIST":var r="/image";t.isEditorial&&(r="/editorial_image"),i="".concat(RConstants.uploadsPath,"/lists/").concat(t.listId).concat(r),n.append("listId",t.listId);break;case"NODE":i="".concat(RConstants.uploadsPath,"/lists/").concat(t.listId,"/items/").concat(t.nodeId,"/image"),n.append("listId",t.listId),n.append("nodeId",t.nodeId);break;case"PROFILE":i="".concat(RConstants.uploadsPath,"/users/").concat(t.userId,"/image"),n.append("userId",t.userId);break;default:return RUtils.console.warn("IVE","Unknown image type, skipping."),!1}n.append("data",JSON.stringify(e.crop)),RUtils.ajax({method:"POST",url:i,data:n,withCredentials:!1,headers:{"Content-Type":"multipart/form-data",Accept:"application/json, text/javascript, */*"},error:function(e){RUtils.console.error("IVE","Image crop error",e),alert("There was an error cropping your image. Please try again."),a.imagePreviewDestroy()},callback:function(i){if(!i.resource.cropped||!i.resource.cropped.data)return RUtils.console.error("IVE","Image crop error"),alert("There was an error cropping your image. Please try again."),void a.imagePreviewDestroy();switch(e.cropped=i.resource.cropped.data,t.imageType.toUpperCase()){case"ARTICLE":a.articleImageAdd(e,t);break;case"LIST":a.listImageAdd(e,t);break;case"NODE":a.nodeImageAdd(e,t);break;case"PROFILE":a.profileImageAdd(e,t);break;default:return RUtils.console.warn("IVE","Unknown image type, skipping."),!1}}})},a)},131:function(e,t,i){"use strict";i.r(t);var a,n,r,o,c,s,l,u,m,d,p=i(111),g=i.n(p);RView.IVE=(a=RView.IVE,o=window.setTimeout,c=window.requestAnimationFrame||o,s=null,l=null,u=function(e){var t=document.getElementById("ive__previewImageSource");r&&r.destroy();var i={responsive:!1,autoCropArea:1,movable:!1,rotatable:!1,scalable:!1,zoomable:!1,minContainerWidth:250,minCropBoxWidth:250,minCropBoxHeight:250,viewMode:1,cropend:function(e){RUtils.console.log(e)}};e&&"NaN"!==e?(e=e.split(/\//),i.aspectRatio=e[0]/e[1]):i.aspectRatio="NaN",r=new g.a(t,i)},m=function(e,t){if(!e)return RUtils.console.log("IVE","No image sent, skipping."),!1;var i;i=e.attribution&&""!==e.attribution?e.attribution.parseObjectAsQueryString():"attributionType=DEFAULT&authorName=&authorUrl=&imageSourceUrl=&websiteName=&licenseName=&licenseUrl=";var a=t.imageType.toLowerCase(),r="".concat('<div id="ive__previewImageRestrict" class="inlineBlock"><img id="ive__previewImageSource" class="" src="').concat(e.original.image,"?v=").concat(RUtils.random("1/5000","n")).concat(RUtils.random("1/5000","n"),'" ');"RANKER"===t.galleryType&&(r+='data-ive-imagenumber="'.concat(e.imageNumber,'"')),r+='data-ive-attribution="'.concat(decodeURIComponent(i),'"/>')+'</div><div id="ive__previewImageControls" class="width100 whiteBg center absolute">'+'<span class="robotoC rnkrBlue pointer $ive" data-ive-click="'.concat(a,':imageEdit:previewDestroy">CANCEL</span>'),"NODE"!==t.imageType||t.galleryType&&"RANKER"===t.galleryType||(r+="".concat('<span class="ive__previewImageControlsAspect robotoC rnkrBlue pointer $ive" data-ive-click="node:imageEdit:previewSetAspectRatio" data-ive-options="ratio=1/1"><img src="').concat(RConstants.staticPath,'/dist/img/ive/ive__imagePreviewCrop-square.svg" width="22" height="22" ')+'class="ive__previewImageControlsIcon"/>&nbsp;SQUARE CROP</span><span class="ive__previewImageControlsAspect robotoC black pointer $ive" data-ive-click="node:imageEdit:previewSetAspectRatio" data-ive-options="ratio=NaN">'+'<img src="'.concat(RConstants.staticPath,'/dist/img/ive/ive__imagePreviewCrop-freeform.svg" width="32" height="22" ')+'class="ive__previewImageControlsIcon"/>&nbsp;FREEFORM CROP</span>'),function(e,t){c(function(){if(n.innerHTML=t,!e.galleryType||"RANKER"!==e.galleryType){var i="NaN";switch(e.imageType.toUpperCase()){case"LIST":i="1.91/1";break;case"NODE":"GRID"===RList.formatType&&(i="1/1");break;case"PROFILE":i="1/1"}u(i)}})}(t,r+="".concat('<button id="ive__previewImageControlsDone" class="button button--rounded button--blue button__default $ive" data-ive-click="').concat(a,':imageEdit:previewCropImage">')+"LOOKS GOOD</button></div>")},d=function(e,t,i){(n=document.createElement("div")).id="ive__previewImage",n.className="width100 height100 absolute whiteBg center",n.innerHTML=RUtils.spinner.create("iveImagePreviewCreate"),function(e){var t=document.getElementById("modal__imageEdit");c(function(){t.appendChild(e)})}(n),t.galleryType&&"RANKER"===t.galleryType?(e.attribution=i,a.imagePreviewCreate(e,t)):a.processNewImage(e,t,i)},a.imagePreview=function(e,t,i){return t.imageType?t.uploadType?void d(e,t,i):(RUtils.console.warn("IVE","No upload type passed, skipping."),!1):(RUtils.console.warn("IVE","No image type passed, skipping."),!1)},a.imagePreviewCreate=function(e,t){s=e,l=t,m(e,t)},a.imagePreviewDestroy=function(){r&&r.destroy(),c(function(){n&&n.remove()}),s=null,l=null},a.imagePreviewSetAspectRatio=function(e){var t=e.getAttribute("data-ive-options");if(!t||"undefined"===t||""===t)return RUtils.console.warn("IVE","No aspect ratio set, skipping."),!1;if(!(t=t.parseQueryString()).ratio)return RUtils.console.warn("IVE","No aspect ratio set, skipping."),!1;u(t.ratio);for(var i,a=document.getElementsByClassName("ive__previewImageControlsAspect"),n=0;i=a[n];n++)i.classList.remove("rnkrBlue"),i.classList.add("black");e.classList.add("rnkrBlue")},a.imagePreviewCropImage=function(){var e=document.getElementById("ive__previewImageSource");s.attribution=e.getAttribute("data-ive-attribution").parseQueryString(),r?(s.crop=r.getData(),s.crop.x<0&&(s.crop.x=0),s.crop.y<0&&(s.crop.y=0),a.processCroppedImage(s,l)):l.imageType&&"article"===l.imageType?a.articleImageUseRanker(s,l):a.nodeImageUseRanker(s,l);var t=document.getElementById("ive__previewImageControls");t&&(t.innerHTML=RUtils.spinner.create("iveImagePreviewAdd"))},a)},132:function(e,t){var i,a,n,r,o,c,s,l,u,m,d,p,g,b,v,y,f,h,I;RView.IVE=(i=RView.IVE,a=window.setTimeout,n=window.clearTimeout,r=window.requestAnimationFrame||a,o=null,c={},s="",l="",u=1,m=null,d=null,p=function(e){var t=e.getAttribute("data-ive-options");return(t=t&&""!==t&&"undefined"!==t?t.parseQueryString():{}).editType=(t.editType||"EDIT").toUpperCase(),t.galleryType=(t.galleryType||"FLICKR").toUpperCase(),t.forcePage1=(t.forcePage1||"false").parseBoolean(),t},g=function(){r(function(){RUtils.spinner.destroy("ive__imageEditGalleryResults")})},b=function(e,t){r(function(){g(),o.insertAdjacentHTML("beforeend",e),"RANKER"!==t.galleryType&&m>u&&function(e){e.forcePage1=!1;var t="LIST"===e.imageType.toUpperCase()?"list":"node",i="".concat('<button id="ive__imageEditGalleryLoadMore" class="block center pointer $ive" data-ive-click="').concat(t,':imageEdit:gallerySearch" ')+'data-ive-options="'.concat(e.parseObjectAsQueryString(),'"')+">load more</span>";r(function(){o.insertAdjacentHTML("beforeend",i)})}(t)})},v=function(e,t){for(var i,a="",n="LIST"===t.imageType.toUpperCase()?"list":"node",r=0;i=e[r];r++)a+="".concat('<span class="ive__imageEditGalleryResult relative inlineBlock pointer $ive" data-ive-click="').concat(n,':imageEdit:previewGallery" ')+'data-ive-options="'.concat(t.parseObjectAsQueryString(),"&imageSource=").concat(i.source,'" ')+'data-ive-attribution="'.concat(i.attribution.parseObjectAsQueryString(),'" '),"RANKER"===t.galleryType&&(a+='data-ive-imagenumber="'.concat(i.imageNumber,'" '),i.url="".concat(i.url,"?h=68")),a+="".concat('><img src="').concat(i.thumbnail?i.thumbnail:i.url,'" data-ive-url="').concat(i.url,'">'),i.width&&i.height&&(a+='<span class="ive__imageEditGallerySize float absolute white">'.concat(i.width," X ").concat(i.height,"</span>")),a+="</span>";b(a,t)},y=function(e,t){c[e.cacheId]=1===u?t:c[e.cacheId].concat(t)},f=function(e){var t={};switch(e.toString()){case"0":t.name="All Rights Reserved",t.url="http://www.flickr.com";break;case"1":t.name="CC-BY-NC-SA 2.0",t.url="http://creativecommons.org/licenses/by-nc-sa/2.0/";break;case"2":t.name="CC-BY-NC 2.0",t.url="http://creativecommons.org/licenses/by-nc/2.0/";break;case"3":t.name="CC-BY-NC-ND 2.0",t.url="http://creativecommons.org/licenses/by-nc-nd/2.0/";break;case"4":t.name="CC-BY 2.0",t.url="http://creativecommons.org/licenses/by/2.0/";break;case"5":t.name="CC-BY-SA 2.0",t.url="http://creativecommons.org/licenses/by-sa/2.0/";break;case"6":t.name="CC-BY-ND 2.0",t.url="http://creativecommons.org/licenses/by-nd/2.0/";break;case"7":t.name="No known copyright restrictions",t.url="http://flickr.com/commons/usage/";break;case"8":t.name="United States Government Work",t.url="http://www.usa.gov/copyright.shtml";break;default:t.name="No known copyright restrictions",t.url="http://flickr.com/commons/usage/"}return t},h=function(e,t){for(var i,a=[],n=0;i=e[n];n++){var r=f(i.license),o={thumbnail:i.url_s,url:i.url_l?i.url_l:i.url_c,width:i.url_l?i.width_l:i.width_c,height:i.url_l?i.height_l:i.height_c,source:"FLICKR",attribution:{attributionType:"IMPORTED",authorName:i.ownername,authorUrl:"",imageSourceUrl:i.url_l?i.url_l:i.url_c,licenseName:r.name,licenseUrl:r.url,websiteName:"flickr"}};"undefined"!==o.width&&o.width>250&&a.push(o)}v(a,t)},I=function(e,t){for(var i,a=[],n=0;i=e[n];n++){var r={thumbnail:"".concat(i.thumbImgUrl,"?h=68&q=70&fm=pjpg"),url:"".concat(i.url,"?h=auto&q=60&fm=pjpg"),source:i.imageSource?i.imageSource:"RANKER",imageNumber:i.imageNumber,attribution:{attributionType:i.attribution.attributionType?i.attribution.attributionType:"IMPORTED",authorName:i.attribution.authorName?i.attribution.authorName:"",authorUrl:i.attribution.authorUrl?i.attribution.authorUrl.replace(/'/g,"%27"):"",imageSourceUrl:i.attribution.imageSourceUrl?i.attribution.imageSourceUrl.replace(/'/g,"%27"):"",licenseName:i.attribution.licenseName?i.attribution.licenseName:"",licenseUrl:i.attribution.licenseUrl?i.attribution.licenseUrl.replace(/'/g,"%27"):"",websiteName:i.attribution.websiteName?i.attribution.websiteName:""}};a.push(r)}v(a,t)},i.imageGallerySearch=function(e){var t=p(e);if(o&&o.isConnected||(o=document.getElementById("ive__imageEditGalleryResults")),"FLICKR"===t.galleryType){var i=document.getElementsByClassName("ive__imageEditGalleryTab--ranker")[0];i&&(i.classList.remove("ive__imageEditGalleryTab--selected"),document.getElementsByClassName("ive__imageEditGalleryTab--flickr")[0].classList.add("ive__imageEditGalleryTab--selected"))}var a=document.getElementById("ive__imageEditGallerySearchInput").value,n=a.encodeBase64(),d="".concat(t.galleryType,"__").concat(n),b={term:a,termBase64:n,cacheId:d};switch(n!==s?(o.innerHTML="",s=n,u=1):t.galleryType!==l||t.forcePage1?(o.innerHTML="",u=1):u++,r(function(){o.insertAdjacentHTML("beforeend",RUtils.spinner.create("ive__imageEditGalleryResults"))}),function(){if(o){var e=document.getElementById("ive__imageEditGalleryLoadMore");e&&r(function(){e.remove()})}}(),l=t.galleryType,t.galleryType){case"FLICKR":1===u&&c[d]?h(c[d],t):function(e,t,i){RUtils.ajax({withCredentials:!1,url:"https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=6dcd92831f7b868ce66cfd6618eaac84&text=".concat(i.term,"&page=").concat(u,"&per_page=20&license=4,6,3,2,7&sort=relevance&content_type=4&media=photos&extras=url_l,url_c,url_s,owner_name,license")+"&format=json&nojsoncallback=1&jsoncallback=?",error:function(e){RUtils.console.error("IVE","Image search error",e)},callback:function(e){e.photos.photo.length?(y(i,e.photos.photo),h(e.photos.photo,t),m=e.photos.pages):g()}})}(0,t,b);break;case"RANKER":1===u&&c[d]?I(c[d],t):function(e,t,i){var a="".concat(RConstants.apiPath,"/nodes/").concat(t.nodeId,"/images?limit=200");t.imageType&&"article"===t.imageType&&(a="".concat(RConstants.apiPath,"/lists/").concat(t.listId,"/article/images")),RUtils.ajax({url:a,error:function(e){RUtils.console.error("IVE","Image search error",e)},callback:function(e){e.length?(y(i,e),I(e,t),m=1):g()}})}(0,t,b)}},i.imageGallerySearchByKey=function(e,t){n(d);var r=1500;13===t.which&&(r=10),d=a(function(){i.imageGallerySearch(e)},r)},i.imageGalleryTab=function(e){for(var t,a=p(e),n=document.getElementsByClassName("ive__imageEditGalleryTab"),r=0;t=n[r];r++)t.classList.remove("ive__imageEditGalleryTab--selected");document.getElementsByClassName("ive__imageEditGalleryTab--".concat(a.galleryType.toLowerCase()))[0].classList.add("ive__imageEditGalleryTab--selected"),i.imageGallerySearch(e)},i.imagePreviewFromGallery=function(e){var t=p(e),a=e.getElementsByTagName("img")[0].getAttribute("data-ive-url"),n=function(e){var t=e.getAttribute("data-ive-attribution");return t=t&&""!==t&&"undefined"!==t?decodeURIComponent(t).parseQueryString():{attributionType:"DEFAULT",authorName:"",authorUrl:"",imageSourceUrl:"",websiteName:"",licenseName:"",licenseUrl:""}}(e);if(a&&""!==a.trim()){"RANKER"===t.galleryType&&(a={original:{image:a},imageNumber:e.getAttribute("data-ive-imagenumber"),attribution:n}),i.imagePreview(a,t,n);var r="LIST"===t.imageType.toUpperCase()?"list":"node";RUtils.trackEvent({category:"list",action:"".concat(t.editType,"_").concat(r,"ImagePreviewFromGallery")})}},i)},133:function(e,t){RView.IVE=function(e){var t,i=window.setTimeout,a=window.requestAnimationFrame||i,n=!1,r=function(e){var t=e.getAttribute("data-ive-options");return(t=t&&""!==t&&"undefined"!==t?t.parseQueryString():{}).editType=(t.editType||"EDIT").toUpperCase(),t},o=function(e,i){if(!i)return RUtils.console.log("IVE","No attribution sent, skipping."),!1;var n="",r="";"IMPORTED"===i.attributionType&&(n='disabled="true" ',r='<h4 id="ive__imageAttributionH4" class="block center rnkrVRRed">Attribution for imported images cannot be edited</h4>');var o,c='<h3 id="ive__imageAttributionH3" class="block center robotoC">add photo credit</h3>'.concat(r,'<div id="ive__imageAttributionForm" class="inlineBlock">')+'<label class="ive__attributionLabel inlineBlock grey" for="ive__imageAttribution--authorName">Author Name</label>'+'<input id="ive__imageAttribution--authorName" class="ive__attributionInput ive__formInput" type="text" '.concat(n,'placeholder="user uploaded image" ')+'value="'.concat(i.authorName&&"user uploaded image"!==i.authorName?decodeURIComponent(i.authorName):"",'">')+'<label class="ive__attributionLabel inlineBlock grey" for="ive__imageAttribution--authorUrl">Author URL</label>'+'<input id="ive__imageAttribution--authorUrl" class="ive__attributionInput ive__formInput" type="text" '.concat(n,'placeholder="" ')+'value="'.concat(i.authorUrl?decodeURIComponent(i.authorUrl):"",'">')+'<label class="ive__attributionLabel inlineBlock grey" for="ive__imageAttribution--websiteName">Website Name</label>'+'<input id="ive__imageAttribution--websiteName" class="ive__attributionInput ive__formInput" type="text" '.concat(n,'placeholder="" ')+'value="'.concat(i.websiteName?decodeURIComponent(i.websiteName):"",'">')+'<label class="ive__attributionLabel inlineBlock grey" for="ive__imageAttribution--sourceUrl">Website/Image URL</label>'+'<input id="ive__imageAttribution--sourceUrl" class="ive__attributionInput ive__formInput" type="text" '.concat(n,'placeholder="" ')+'value="'.concat(i.imageSourceUrl?decodeURIComponent(i.imageSourceUrl):"",'">')+'<p id="ive__imageAttributionLicenseSamples"><a href="https://commons.wikimedia.org/wiki/Commons:Credit_line" target="_blank" class="rnkrBlue">Sample credits for different licenses</a></p><label class="ive__attributionLabel inlineBlock grey" for="ive__imageAttribution--licenseName">License Name</label>'+'<input id="ive__imageAttribution--licenseName" class="ive__attributionInput ive__formInput" type="text" '.concat(n,'placeholder="" ')+'value="'.concat(i.licenseName?decodeURIComponent(i.licenseName):"",'">')+'<label class="ive__attributionLabel inlineBlock grey" for="ive__imageAttribution--licenseUrl">License URL</label>'+'<input id="ive__imageAttribution--licenseUrl" class="ive__attributionInput ive__formInput" type="text" '.concat(n,'placeholder="" ')+'value="'.concat(i.licenseUrl?decodeURIComponent(i.licenseUrl):"",'">')+'</div><div id="ive__imageAttributionControls" class="width100 whiteBg center absolute"><span class="robotoC rnkrBlue pointer $ive" data-ive-click="node:imageEdit:attributionDestroy">CANCEL</span><button id="ive__imageAttributionControlsDone" class="button button--rounded button--blue button__default $ive" data-ive-click="node:imageEdit:attributionSave" '+'data-ive-options="'.concat(e.parseObjectAsQueryString(),"&attributionType=").concat(i.attributionType,'">')+"LOOKS GOOD</button></div>";o=c,a(function(){t.innerHTML=o})},c=function(t,i){var n,r;switch(i.imageType.toUpperCase()){case"ARTICLE":if(!i.listId)return RUtils.console.warn("IVE","No list ID found, skipping."),!1;n="".concat(RConstants.apiPath,"/lists/").concat(i.listId,"/article/images/").concat(i.imageNumber,"/attribution");break;case"LIST":if(!i.listId)return RUtils.console.warn("IVE","No list ID found, skipping."),!1;n="".concat(RConstants.apiPath,"/lists/").concat(i.listId,"/image/attribution");break;case"NODE":if(!i.nodeId)return RUtils.console.warn("IVE","No node ID found, skipping."),!1;r=document.querySelector('.listItem[data-node-id="'.concat(i.nodeId,'"]')).getElementsByClassName("rankerList__caption")[0],n="".concat(RConstants.apiPath,"/nodes/").concat(i.nodeId,"/images/").concat(i.imageNumber,"/attribution")}n&&RUtils.ajax({method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json","access-token":RUtils.cookie.get("RT")},url:n,data:JSON.stringify(t),error:function(){e.imageAttributionDestroy()},callback:function(){!function(e,t){var i;if(t)i=t;else{var n=document.getElementById("ive__listImageAttribution");n&&(i=n.getElementsByClassName("rankerList__caption")[0])}if(i){var r=RUtils.imageAttribution.getAttribution(e);a(function(){i.parentNode.replaceChild(r,i)})}}(t,r),e.imageAttributionDestroy()}})},s=function(e,i){(t=document.createElement("div")).id="ive__imageAttribution",t.className="width100 height100 absolute whiteBg center",t.innerHTML=RUtils.spinner.create("iveImageAttributionCreate"),function(e){var t=document.getElementById("modal__imageEdit");a(function(){t.appendChild(e)})}(t),function(e,t){var i;switch(t.imageType.toUpperCase()){case"ARTICLE":if(!t.listId)return RUtils.console.warn("IVE","No list ID found, skipping."),!1;i="".concat(RConstants.apiPath,"/lists/").concat(t.listId,"/article/images/").concat(t.imageNumber,"/attribution");break;case"LIST":if(!t.listId)return RUtils.console.warn("IVE","No list ID found, skipping."),!1;i="".concat(RConstants.apiPath,"/lists/").concat(t.listId,"/image/attribution");break;case"NODE":if(!t.nodeId)return RUtils.console.warn("IVE","No node ID found, skipping."),!1;i="".concat(RConstants.apiPath,"/nodes/").concat(t.nodeId,"/images/").concat(t.imageNumber,"/attribution")}i&&RUtils.ajax({url:i,callback:function(e){o(t,e)}})}(0,i)};if(e.imageAttributionEdit=function(e,t){if("A"!==t.target.tagName||"rankerList__captionLink"!==t.target.className){if("FIGCAPTION"===t.target.tagName||"ive__imageEditAttribution"===e.id||"ive__listImageEditAttribution"===e.id||"ive__listImageAttribution"===e.id){var i=r(e);RUtils.modal.get().imageEdit?s(0,i):(RUtils.modal.create({id:"imageEdit",width:"808px",height:"750px",onOpen:function(){s(0,i)}}),n=!0),RView.IVE.menuDestroy(),RUtils.trackEvent({category:"list",action:"".concat(i.editType,"_imageAttribution")})}}else window.open(t.target.href,"_blank").focus()},e.imageAttributionDestroy=function(){a(function(){n?(RUtils.modal.destroy(),n=!1):t.remove()})},e.imageAttributionSave=function(t){var i=r(t);if("IMPORTED"!==i.attributionType){var a={attributionType:"MANUAL",authorName:document.getElementById("ive__imageAttribution--authorName").value,authorUrl:document.getElementById("ive__imageAttribution--authorUrl").value,websiteName:document.getElementById("ive__imageAttribution--websiteName").value,imageSourceUrl:document.getElementById("ive__imageAttribution--sourceUrl").value,licenseName:document.getElementById("ive__imageAttribution--licenseName").value,licenseUrl:document.getElementById("ive__imageAttribution--licenseUrl").value};""!==a.authorName||""===a.authorUrl?""!==a.websiteName||""===a.imageSourceUrl?""===a.licenseName||""!==a.licenseUrl?""!==a.licenseName||""===a.licenseUrl?(document.getElementById("ive__imageAttributionControls").innerHTML=RUtils.spinner.create("iveImageAttributionAdd"),c(a,i)):alert("License Name is required for a License."):alert("License URL is required for a License."):alert("Website Name is required for a Website."):alert("Author Name is required for a Author.")}else e.imageAttributionDestroy()},"IVE"===RConstants.pageType&&RList.listOptions.showListImage&&e.isAdmin()){var l=document.getElementById("ive__listImageAttribution");l&&a(function(){l.classList.add("$ive"),l.setAttribute("data-ive-click","node:imageEdit:attributionEdit"),l.setAttribute("data-ive-options","listId=".concat(RList.id,"&imageType=list&editType=EDIT&imageType=list"))})}return e}(RView.IVE)}});