!function(e){var t={};function r(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(o,s,function(t){return e[t]}.bind(null,s));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="./",r(r.s=419)}({419:function(e,t,r){r(420),r(421),r(422),r(423),r(424),r(425),r(426),r(427),r(428),r(429),r(430),r(431),r(432),r(433),r(434),r(435),r(436),e.exports=r(437)},420:function(e,t){var r,o;RUser.DefineProfile=function(e){RUser.profile=function(){var e,t,r={lastUpdate:Date.now(),id:0,userName:RUser.DEFAULT_NAME,type:RUser.DEFAULT_TYPE,status:RUser.DEFAULT_STATUS,email:"",aboutMe:"",url:"",imgUrl:"",imgixUrl:"",imageStatus:RUser.DEFAULT_IMAGE_STATUS,age:"",gender:RUser.DEFAULT_GENDER,country:"",countryCode:"",countryId:"",displayPicOnLists:RUser.DEFAULT_DISPLAY_PIC,canEditHtml:RUser.DEFAULT_PRIVILEGE,canAdminBar:RUser.DEFAULT_PRIVILEGE,canEditLink:RUser.DEFAULT_PRIVILEGE};e=RUtils.localStorage.get("_RUP")||r;var o=function(){clearTimeout(t),t=setTimeout(function(){RUtils.localStorage.set("_RUP",e)},125)};return o(),{getProperty:function(t){return e[t]},setProperty:function(t,r){"lastUpdate"!==t?(e[t]=r,e.lastUpdate=Date.now(),o()):RUtils.console.warn("You can't update that")}}}(),e?RUtils.postMessage.emit("USER_PROFILE_READY"):window.addEventListener("jsLoadPage",function(){RUtils.postMessage.emit("USER_PROFILE_READY")},!1),dataLayer[0].loggedInUser="GUEST"!==RUser.profile.getProperty("type")},r=!1,o=function(e){RUtils.ajax({method:"POST",url:"".concat(RConstants.apiPath,"/users/authenticate"),headers:{"X-Access-Token":e,"Content-type":"application/json"},data:JSON.stringify({accessToken:RUtils.cookie.get("RT")}),error:function(e){RUtils.console.error("Define Profile","Error authenticating user.",e)},callback:function(t){RUtils.ajax({url:"".concat(RConstants.apiPath,"/users/").concat(t.holderId,"?include=privileges"),headers:{"X-Access-Token":e},error:function(e){RUtils.console.error("Define Profile","Error getting user.",e)},callback:function(e){RUser.profile.setProperty("id",e.id),RUser.profile.setProperty("userName",e.userName),RUser.profile.setProperty("type",e.type),RUser.profile.setProperty("status",e.status),RUser.profile.setProperty("email",e.email),RUser.profile.setProperty("aboutMe",e.aboutMe),RUser.profile.setProperty("url",e.profile.url),RUser.profile.setProperty("imgUrl",e.profile.imgUrl),RUser.profile.setProperty("imgixUrl",e.profile.imgixUrl),RUser.profile.setProperty("imageStatus",e.profile.profileImageStatus),RUser.profile.setProperty("displayPicOnLists",RUser.DEFAULT_DISPLAY_PIC),RUser.profile.setProperty("age",RUtils.date.getDateAge(e.profile.dateOfBirth,Date.now(),"y")),RUser.profile.setProperty("gender",e.profile.gender),RUser.profile.setProperty("state",e.profile.state),RUser.profile.setProperty("country",e.profile.country.name),RUser.profile.setProperty("countryCode",e.profile.country.code),RUser.profile.setProperty("countryId",e.profile.country.id),RUser.profile.setProperty("canEditHtml",e.userPrivileges?e.userPrivileges.editHtml:RUser.DEFAULT_PRIVILEGE),RUser.profile.setProperty("canAdminBar",e.userPrivileges?e.userPrivileges.adminBar:RUser.DEFAULT_PRIVILEGE),RUser.profile.setProperty("canEditLink",e.userPrivileges?e.userPrivileges.editLink:RUser.DEFAULT_PRIVILEGE)}})}})},function(){RUser.ID_PLACEHOLDER="###USER_ID###",RUser.DEFAULT_NAME="Guest",RUser.DEFAULT_TYPE="GUEST",RUser.DEFAULT_STATUS="ACTIVE",RUser.DEFAULT_IMAGE_STATUS="NOT_UPLOADED",RUser.DEFAULT_GENDER="NONE",RUser.DEFAULT_DOB="1/1/1970",RUser.DEFAULT_AGE=RUtils.date.getDateAge(RUser.DEFAULT_DOB,Date.now(),"y"),RUser.DEFAULT_DISPLAY_PIC=!0,RUser.DEFAULT_PRIVILEGE="NONE",window.addEventListener("jsLoadPage",function(){r=!0},!1);var e=!!RUtils.cookie.get("RT"),t=RUtils.localStorage.get("_RUP"),s=!!t,i=s&&"GUEST"===t.type;if(e&&!s||e&&i){var a=RUtils.sessionStorage.get("_RAT");a?o(a):RUtils.ajax({method:"POST",url:"".concat(RConstants.fullPath,"/app/getAccessToken.htm"),error:function(e){RUtils.console.error("Define Profile","Error getting access token",e)},callback:function(e){o(e.accessToken),RUtils.sessionStorage.set("_RAT",e.accessToken)}})}RUser.DefineProfile(r)}()},421:function(e,t){var r;RUser.DefineSession=function(){RUser.session=function(){var e,t={lastUpdate:Date.now(),sessionStartTime:Date.now(),asid:"",ppid:"",pageViewCount:1,pageViewHistory:[],listViewCount:1,listViewHistory:[],votes:0,listVote10:1,facebookListIdMedium:"",facebookListIdInf:""},r=null;(e=RUtils.sessionStorage.get("_RUS")||t).sessionStartTime||(e.sessionStartTime=Date.now());var o=function(){clearTimeout(r),r=setTimeout(function(){RUtils.sessionStorage.set("_RUS",e)},125)};return o(),{getProperty:function(t){return e[t]},setProperty:function(t,r){"lastUpdate"!==t?(e[t]=r,e.lastUpdate=Date.now(),o()):RUtils.console.warn("You can't update that")}}}(),window.addEventListener("jsLoadPage",function(){RUtils.postMessage.emit("USER_SESSION_READY")},!1)},r=window.location.search.parseQueryString(),RUtils.postMessage.handle("USER_SESSION_READY",function(){r.asid&&RUser.session.setProperty("asid",r.asid),r.ppid&&RUser.session.setProperty("ppid",r.ppid)}),RUser.DefineSession()},422:function(e,t){RUser.DefineData=function(){RUser.data=function(){var e,t,r={},o={lastUpdate:Date.now(),rref:RUser.DEFAULT_RREF,rrefid:RUser.DEFAULT_RREFID,isRegistered:!1,isLoggedIn:!1,isReturnVisitor:!1,isCoreVisitor:!1,isCoreVoter:!1,isGraphValueVoter:!1,hasVoted:!1,hasVotedPoll:!1,hasVotedMore:!1,hasReranked:!1,hasOpenItems:!1,hasCreatedList:!1,hasViewedVideo:!1,hasRelatedViews:!1,hasShared:!1,hasVisitedHome:!1,hasViewedMany:0,hasClickedSignUp:0,hasEmbeddedList:0,hasViewedNonNSFWFromSearch:0,voteCountLifetime:0,voteListLifetime:0,voteScoreLifetime:0,visitCount:0,videoViewCount:0,lastVisitTime:0,day30Time:0,day30Visit:0,day30Pagelands:0,day30Home:0,day30Browse:0,day30Node:0,day30Search:0,day30Vote:0,day30VoteVisit:0,day30Shares:0,day30GridSearch:0,day60Time:Date.now(),day60Visit:1};e=RUtils.localStorage.get("_RUD")||o,r={day30VoteVisit:!1,day30Visit:!1,day30Home:!1,day30Browse:!1,day30Node:!1,day30Search:!1,day30Shares:!1,day30GridSearch:!1,day60Visit:!1};var s=function(){clearTimeout(t),t=setTimeout(function(){RUtils.localStorage.set("_RUD",e),RConstants.RSUT="".concat(e.isRegistered?"REGISTERED":"NOTREGISTERED","-").concat(e.isLoggedIn?"LOGGED":"NOTLOGGED","-").concat(e.hasVoted?"VOTED":"NOTVOTED","-").concat(e.hasReranked?"RERANKED":"NOTRERANKED","-").concat(e.hasOpenItems?"ADDEDITEM":"NOTADDEDITEM","-").concat(e.hasCreatedList?"CREATEDLIST":"NOTCREATEDLIST").encodeBase64(),RConstants.quantcastLabel=RConstants.quantcastLabel.substr(0,RConstants.quantcastLabel.length-1)+(e.isRegistered?",isRegistered":"")+(e.isLoggedIn?",isLoggedIn":"")+(e.isReturnVisitor?",isReturnVisitor":"")+(e.hasVoted?",hasVoted":"")+(e.hasVotedPoll?",hasVotedPoll":"")+(e.hasReranked?",hasReranked":"")+(e.hasOpenItems?",hasOpenItems":"")+(e.hasCreatedList?",hasCreatedList":"")+(e.hasViewedVideo?",hasViewedVideo":"")+(e.hasRelatedViews?",hasRelatedViews":"")+(e.hasViewedMany?",hasViewedMany":"")+(e.isRegistered?",isHooked":e.hasReranked?",isHooked":e.hasVotedMore?",isHooked":e.hasShared?",isHooked":e.hasVisitedHome?",isHooked":"")},125)};s();return{getProperty:function(t){return e[t]},setProperty:function(t,o){"lastUpdate"!==t?function(e){var t=r[e];return null!=t&&(t?!!t:(r[e]=!0,!1))}(t)||(e[t]=o,e.lastUpdate=Date.now(),s()):RUtils.console.warn("You can't update that")}}}(),window.addEventListener("jsLoadPage",function(){RUtils.postMessage.emit("USER_DATA_READY")},!1)},RUtils.postMessage.handle("USER_DATA_READY",function e(){void 0!==RConstants.RSUT?(RUtils.trackCustom({index:1,name:"userType",value:RConstants.RSUT.decodeBase64(),scope:3}),"undefined"!=typeof _gaq&&_gaq.push(["_rnkr._trackPageview"]),"undefined"!=typeof _qevents&&(_qevents.push({qacct:"p-NdC0qw1GM-4Em",labels:RConstants.quantcastLabel}),RUtils.console.info(RConstants.quantcastLabel)),RUser.setDimension()):setTimeout(function(){e()},500)}),RUser.DefineData()},423:function(e,t){RUser.DefineInterest=function(){RUser.interest=function(){var e,t,r={lastUpdate:Date.now()};e=RUtils.localStorage.get("_RUI")||r;var o=function(){clearTimeout(t),t=setTimeout(function(){RUtils.localStorage.set("_RUI",e)},125)};return o(),{getProperty:function(t){return e[t]},setProperty:function(t,r){"lastUpdate"!==t?(e[t]=r,e.lastUpdate=Date.now(),o()):RUtils.console.warn("You can't update that")}}}(),window.addEventListener("jsLoadPage",function(){RUtils.postMessage.emit("USER_INTEREST_DATA_READY")},!1)},RUser.DefineInterest()},424:function(e,t){var r,o,s,i,a,n;RUser.queueAction=(r=[],o=!1,s=function(e,t){e?(t=t||null,RUser.profile.setProperty("isValid",t),RUser.profile.setProperty("id",e.id),RUser.profile.setProperty("userName",e.userName),RUser.profile.setProperty("type",e.type),RUser.profile.setProperty("status",e.status),RUser.profile.setProperty("email",e.email),RUser.profile.setProperty("aboutMe",e.aboutMe),RUser.profile.setProperty("url",e.profile.url),RUser.profile.setProperty("imgUrl",e.profile.imgUrl),RUser.profile.setProperty("imgixUrl",e.profile.imgixUrl),RUser.profile.setProperty("imageStatus",e.profile.profileImageStatus),RUser.profile.setProperty("age",RUtils.date.getDateAge(e.profile.dateOfBirth,Date.now(),"y")),RUser.profile.setProperty("gender",e.profile.gender),RUser.profile.setProperty("country",e.profile.country.name),RUser.profile.setProperty("countryCode",e.profile.country.code),RUser.profile.setProperty("countryId",e.profile.country.id),RUser.profile.setProperty("canEditHtml",e.userPrivileges?e.userPrivileges.editHtml:RUser.DEFAULT_PRIVILEGE),RUser.profile.setProperty("canAdminBar",e.userPrivileges?e.userPrivileges.adminBar:RUser.DEFAULT_PRIVILEGE),RUser.profile.setProperty("canEditLink",e.userPrivileges?e.userPrivileges.editLink:RUser.DEFAULT_PRIVILEGE)):RUtils.console.error("Queue Action","No data for set profile data, returning.")},i=function(e){var t=e.callback;e.url.match(RUser.ID_PLACEHOLDER)&&(e.url=e.url.replace(RUser.ID_PLACEHOLDER,RUser.profile.getProperty("id"))),e.data&&e.data.match(RUser.ID_PLACEHOLDER)&&(e.data=e.data.replace(RUser.ID_PLACEHOLDER,RUser.profile.getProperty("id"))),e.headers["Access-Token"]=RUtils.cookie.get("RT"),e.callback=function(){t&&t.apply(this,arguments)},RUtils.ajax(e)},a=function(){var e;if(!o){for(o=!0;void 0!==(e=r.shift());)i(e);o=!1}},n=function(e){RUtils.ajax({url:"".concat(RConstants.apiPath,"/provisionaltoken"),callback:function(t){var r={"Access-Token":t.value,"Content-type":"application/json",Accept:"application/json","is-guest":!0};RUtils.ajax({method:"POST",url:"".concat(RConstants.apiPath,"/users/"),headers:r,data:JSON.stringify({clientIP:null,referer:document.referrer}),callback:function(t){t.token&&RUtils.cookie.set("RT",t.token),s(t,e),a()}})}})},function(e){var t;e.headers||(e.headers={}),r.push(e),(t=RUtils.cookie.get("RT"))?RUser.profile&&RUser.profile.getProperty("isValid")?a():RUtils.ajax({method:"POST",url:"".concat(RConstants.apiPath,"/users/authenticate"),headers:{"Access-Token":t,"Content-type":"application/json"},data:JSON.stringify({accessToken:t}),error:function(e){401===e.status&&(RUser.signOut(function(){n(!0)}),RUtils.trackEvent({action:"migrate_guest"}))},callback:function(e){RUtils.ajax({url:"".concat(RConstants.apiPath,"/users/").concat(e.holderId,"?include=privileges"),headers:{"Access-Token":t,"Content-type":"application/json"},callback:function(e){s(e,"GUEST"===RUser.profile.getProperty("type")||null),a()}})}}):n(!0)})},425:function(e,t){var r,o,s,i,a,n;RUser.setDimension=(r=!1,s={},i={lastVisitTime:0,userType:o="GUEST",level:"Consumer"},a=function(){RUser.data.setProperty("day30Time",Date.now()),RUser.data.setProperty("day30Visit",1),RUser.data.setProperty("day30Pagelands",1),RUser.data.setProperty("day30Home",0),RUser.data.setProperty("day30Browse",0),RUser.data.setProperty("day30Node",0),RUser.data.setProperty("day30Search",0),RUser.data.setProperty("day30Shares",0),RUser.data.setProperty("day30GridSearch",0),r||RUser.data.setProperty("isCoreVisitor",!1),RUser.data.setProperty("day30Vote",0),RUser.data.setProperty("day30VoteVisit",0),RUser.data.setProperty("isCoreVoter",!1),RUser.data.setProperty("hasVisitedHome",!1),RUser.data.setProperty("hasVisitedBrowse",!1),RUser.data.setProperty("hasVisitedNode",!1),RUser.data.setProperty("hasCreatedList",!1),RUser.data.setProperty("hasVoted",!1),RUser.data.setProperty("hasShared",!1),RUser.data.setProperty("hasReranked",!1),RUser.data.setProperty("hasOpenItems",!1),RUser.data.setProperty("hasClickedSignUp",!1),RUser.data.setProperty("hasEmbeddedList",!1),RUser.data.setProperty("hasViewedNonNSFWFromSearch",!1)},n=function(){RUser.data.setProperty("day60Time",Date.now()),RUser.data.setProperty("day60Visit",1),r||RUser.data.setProperty("isCoreVisitor",!1)},function(){var e;return RUser.data.setProperty("day30Pagelands",RUser.data.getProperty("day30Pagelands")+1),RUtils.date.getDateAge(RUser.data.getProperty("lastVisitTime"),Date.now(),"s",7200)>120&&(RUser.data.setProperty("day30Visit",RUser.data.getProperty("day30Visit")+1),RUser.data.setProperty("day60Visit",RUser.data.getProperty("day60Visit")+1)),"LIST"===RConstants.pageType&&-1===JSON.parse(RList.tagIds).indexOf(43)&&document.referrer.match(/search.htm/)?RUser.data.setProperty("hasViewedNonNSFWFromSearch",!0):"CATEGORYPAGE"!==RConstants.pageType&&"CONSTRUCTPAGE"!==RConstants.pageType&&"ATTRIBUTEPAGE"!==RConstants.pageType&&"RECENTBROAD"!==RConstants.pageType&&"POPULARBROAD"!==RConstants.pageType&&"CROWDRANKEDLISTBROADPAGE"!==RConstants.pageType&&"RANKRANKBROAD"!==RConstants.pageType||!(0===RUser.data.getProperty("day30Browse")||RUtils.date.getDateAge(RUser.data.getProperty("lastVisitTime"),Date.now(),"s",7200)>120)?"HOMEPAGE"===RConstants.pageType&&(0===RUser.data.getProperty("day30Home")||RUtils.date.getDateAge(RUser.data.getProperty("lastVisitTime"),Date.now(),"s",7200)>120)?RUser.data.setProperty("day30Home",RUser.data.getProperty("day30Home")+1):"NODE"===RConstants.pageType&&(0===RUser.data.getProperty("day30Node")||RUtils.date.getDateAge(RUser.data.getProperty("lastVisitTime"),Date.now(),"s",7200)>120)&&(RUser.data.setProperty("day30Node",RUser.data.getProperty("day30Node")+1),RUser.data.setProperty("hasVisitedNode",!0)):(RUser.data.setProperty("day30Browse",RUser.data.getProperty("day30Browse")+1),RUser.data.setProperty("hasVisitedBrowse",!0)),RUser.data.setProperty("lastVisitTime",Date.now()),o=RUser.profile?RUser.profile.getProperty("type"):"Consumer",RUser.profile&&"ADMIN"===o?(a(),n()):(RUtils.date.getDateAge(RUser.data.getProperty("day30Time"),Date.now(),"d")<30?("HOMEPAGE"!==RConstants.pageType||void 0!==document.referrer&&null!==document.referrer&&""!==document.referrer&&(void 0===document.referrer||null===document.referrer||""===document.referrer||document.referrer.match(/\.ranker/i))||(r=!0,RUser.data.setProperty("isCoreVisitor",!0),RUser.data.setProperty("hasVisitedHome",!0)),RUser.data.getProperty("day30Visit")>4&&!RUser.data.getProperty("isCoreVisitor")&&RUser.data.setProperty("isCoreVisitor",!0),(RUser.data.getProperty("day30Vote")>15||RUser.data.getProperty("voteListLifetime")>2)&&!RUser.data.getProperty("isCoreVoter")&&RUser.data.setProperty("isCoreVoter",!0)):a(),RUtils.date.getDateAge(RUser.data.getProperty("day60Time"),Date.now(),"d")<60?RUser.data.getProperty("day60Visit")>7&&!RUser.data.getProperty("isCoreVisitor")&&RUser.data.setProperty("isCoreVisitor",!0):n()),e=RUser.data.getProperty("day30Shares")>=3||RUser.data.getProperty("isLoggedIn")||RUser.data.getProperty("day30Vote")>20||RUser.data.getProperty("day30VoteVisit")>=3||RUser.data.getProperty("day30Pagelands")>=24||RUser.data.getProperty("hasVisitedHome")||RUser.data.getProperty("day30Visit")>=12||RUser.data.getProperty("day30Browse")>=5||RUser.data.getProperty("day30Search")>=5||RUser.data.getProperty("day30Node")>=5||RUser.data.getProperty("day30GridSearch")>2?"Hooked User":RUser.data.getProperty("hasReranked")||RUser.data.getProperty("hasCreatedList")||RUser.data.getProperty("hasOpenItems")||RUser.data.getProperty("hasClickedSignUp")||RUser.data.getProperty("hasShared")||RUser.data.getProperty("hasVoted")||RUser.data.getProperty("day30Pagelands")>=12||RUser.data.getProperty("day30Visit")>=6||RUser.data.getProperty("day30Home")>0||RUser.data.getProperty("day30Browse")>0||RUser.data.getProperty("day30Node")>0||RUser.data.getProperty("hasViewedNonNSFWFromSearch")||RUser.data.getProperty("hasEmbeddedList")||RUser.data.getProperty("day30GridSearch")>0?"Curious Consumers":"Consumer",s="ADMIN"!==o?{lastVisitTime:RUser.data.getProperty("lastVisitTime"),userType:o,level:e}:i,RUtils.localStorage.set("_RUD-LD",s),window.sessionStorage.setItem("_RUD-LD",s.level),RUtils.console.info(s),s})},426:function(e,t){var r,o,s,i;RUtils.postMessage.handle("USER_SESSION_READY",function(){r=RUser.session.getProperty("pageViewCount")||1,RUtils.trackFacebookEvent({action:"pageViewCount",label:r}),RUser.session.setProperty("pageViewCount",++r),function(){var e=!1;o=RUser.session.getProperty("pageViewHistory")||[];for(var t,r=0;t=o[r];r++)t===window.location.pathname&&(e=!0);e||(o.push(window.location.pathname),RUser.session.setProperty("pageViewHistory",o))}(),"LIST"===RConstants.pageType&&(s=RUser.session.getProperty("listViewCount"),RUtils.trackFacebookEvent({action:"listViewCount",label:s}),RUser.session.setProperty("listViewCount",++s),function(){var e=!1;i=RUser.session.getProperty("listViewHistory");for(var t,r=0;t=i[r];r++)t===window.location.pathname&&(e=!0);e||(i.push(window.location.pathname),RUser.session.setProperty("listViewHistory",i))}())}),window.addEventListener("jsLoadPage",function(){document.addEventListener("click",function(){RUtils.trackFacebookEvent({action:"timeOnPage",label:RUtils.date.getDateAge(RUser.pageLandTime,Date.now(),"m").toFixed(2)}),RUtils.trackFacebookEvent({action:"timeOnSession",label:RUtils.date.getDateAge(RUser.session.getProperty("sessionStartTime"),Date.now(),"m").toFixed(2)})})},!1)},427:function(e,t,r){},428:function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o;RUser.signIn=(o=function(e,t,r){var o={"Access-Token":e,"Content-type":"application/json",Accept:"application/json"};"GUEST"===RUser.profile.getProperty("type")&&(o["Guest-User-Id"]=RUser.profile.getProperty("id")),RUtils.ajax({method:"POST",url:"".concat(RConstants.apiPath,"/users/authenticate"),headers:o,data:JSON.stringify({email:t.email?t.email:t.username?t.username:"",userName:t.username?t.username:t.email?t.email:"",password:t.password?t.password:""}),error:function(e){console.log("hit error",e),r&&r(e)},callback:function(e){var t;console.log("hit resolve"),t=e,RUtils.cookie.del("_RAT"),t.value&&RUtils.cookie.set("RT",t.value,360),t.holderId&&RUtils.ajax({url:"".concat(RConstants.apiPath,"/users/").concat(t.holderId,"?include=privileges"),headers:{"Access-Token":t.value,"Content-type":"application/json",Accept:"application/json"},callback:function(e){RUser.profile.setProperty("id",e.id),RUser.profile.setProperty("userName",e.userName),RUser.profile.setProperty("type",e.type),RUser.profile.setProperty("status",e.status),RUser.profile.setProperty("email",e.email),RUser.profile.setProperty("aboutMe",e.aboutMe),RUser.profile.setProperty("url",e.profile.url),RUser.profile.setProperty("imgUrl",e.profile.imgUrl),RUser.profile.setProperty("imgixUrl",e.profile.imgixUrl),RUser.profile.setProperty("imageStatus",e.profile.profileImageStatus),RUser.profile.setProperty("displayPicOnLists",RUser.DEFAULT_DISPLAY_PIC),RUser.profile.setProperty("age",RUtils.date.getDateAge(e.profile.dateOfBirth,Date.now(),"y")),RUser.profile.setProperty("gender",e.profile.gender),RUser.profile.setProperty("country",e.profile.country.name),RUser.profile.setProperty("countryCode",e.profile.country.code),RUser.profile.setProperty("countryId",e.profile.country.id),RUser.profile.setProperty("canEditHtml",e.userPrivileges?e.userPrivileges.editHtml:RUser.DEFAULT_PRIVILEGE),RUser.profile.setProperty("canAdminBar",e.userPrivileges?e.userPrivileges.adminBar:RUser.DEFAULT_PRIVILEGE),RUser.profile.setProperty("canEditLink",e.userPrivileges?e.userPrivileges.editLink:RUser.DEFAULT_PRIVILEGE)}}),RUser.data.setProperty("isLoggedIn",!0),r&&r(e)}})},function(e,t){var s;"object"===r(e)?e.username||e.email?e.password?(s=e.password).length%4==0&&s.match(/^[a-zA-Z0-9\+\/]*={0,3}$/)?RUtils.ajax({url:"".concat(RConstants.apiPath,"/provisionaltoken"),callback:function(r){o(r.value,e,t),RUtils.cookie.set("_RAT",r.value,Date.now()+27e4)}}):RUtils.console.warn("Sign In: password is not secure, skipping."):RUtils.console.warn("Sign In: no password passed, skipping."):RUtils.console.warn("Sign In: no username or email passed, skipping."):RUtils.console.warn("Sign In: no user object passed, skipping.")})},429:function(e,t){RUser.signOut=function(e){RUser.data.setProperty("isLoggedIn",!1),RUtils.cookie.del("RT"),RUtils.cookie.set("JSESSIONID","xyz","-1"),RUtils.localStorage.remove("_RUP"),RUtils.sessionStorage.remove("_RUS"),RUtils.sessionStorage.remove("_RAT"),RUtils.cookie.del("_RAT"),RUtils.cookie.del("RS"),RUtils.cookie.del("RU"),RUtils.cookie.del("RI"),RUtils.ajax("".concat(RConstants.contextPath,"/app/logoutJs.htm")),e?e():setTimeout(function(){window.location.reload()},1e3)}},430:function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o;RUser.signUp=(o=function(e,t,r){var o={"Access-Token":e,"Content-type":"application/json",Accept:"application/json"};"GUEST"===RUser.profile.getProperty("type")&&(o["Guest-User-Id"]=RUser.profile.getProperty("id")),RUtils.ajax({method:"POST",url:"".concat(RConstants.apiPath,"/users/"),headers:o,data:JSON.stringify({email:t.email?t.email:"",userName:t.username?t.username:"",password:t.password?t.password:""}),error:r||null,callback:function(e){var t;t=e,RUtils.cookie.del("_RAT"),t.token&&RUtils.cookie.set("RT",t.token),t.id&&RUtils.ajax({url:"".concat(RConstants.apiPath,"/users/").concat(t.id,"?include=privileges"),headers:{"Access-Token":t.token,"Content-type":"application/json",Accept:"application/json"},callback:function(e){RUser.profile.setProperty("id",e.id),RUser.profile.setProperty("userName",e.userName),RUser.profile.setProperty("type",e.type),RUser.profile.setProperty("status",e.status),RUser.profile.setProperty("email",e.email),RUser.profile.setProperty("aboutMe",e.aboutMe),RUser.profile.setProperty("url",e.profile.url),RUser.profile.setProperty("imgUrl",e.profile.imgUrl),RUser.profile.setProperty("imgixUrl",e.profile.imgixUrl),RUser.profile.setProperty("imageStatus",e.profile.profileImageStatus),RUser.profile.setProperty("displayPicOnLists",RUser.DEFAULT_DISPLAY_PIC),RUser.profile.setProperty("age",RUtils.date.getDateAge(e.profile.dateOfBirth,Date.now(),"y")),RUser.profile.setProperty("gender",e.profile.gender),RUser.profile.setProperty("country",e.profile.country.name),RUser.profile.setProperty("countryCode",e.profile.country.code),RUser.profile.setProperty("countryId",e.profile.country.id),RUser.profile.setProperty("canEditHtml",e.userPrivileges?e.userPrivileges.editHtml:RUser.DEFAULT_PRIVILEGE),RUser.profile.setProperty("canAdminBar",e.userPrivileges?e.userPrivileges.adminBar:RUser.DEFAULT_PRIVILEGE),RUser.profile.setProperty("canEditLink",e.userPrivileges?e.userPrivileges.editLink:RUser.DEFAULT_PRIVILEGE)}}),r&&r(e)}})},function(e,t){var s;"object"===r(e)?e.username?e.email?e.password?(s=e.password).length%4==0&&s.match(/^[a-zA-Z0-9\+\/]*={0,3}$/)?RUtils.ajax({url:"".concat(RConstants.apiPath,"/provisionaltoken"),callback:function(r){o(r.value,e,t),RUtils.cookie.set("_RAT",r.value,Date.now()+27e4)}}):RUtils.console.warn("Sign In: password is not secure, skipping."):RUtils.console.warn("Sign In: no password passed, skipping."):RUtils.console.warn("Sign In: no email passed, skipping."):RUtils.console.warn("Sign In: no username passed, skipping."):RUtils.console.warn("Sign In: no user object passed, skipping.")})},431:function(e,t){var r,o,s,i,a,n,l,c,p,d;RUser.createSignIn=(r=null,o=null,s=null,i=null,a=function(e){requestAnimationFrame(function(){i.innerHTML="boolean"!=typeof e||e?"boolean"==typeof e&&e||!e?"incorrect username or password provided":e:""})},n=function(e){"string"==typeof e.response&&(e=JSON.parse(e.response)),e.message&&a("incorrect username or password provided"),e.value&&requestAnimationFrame(function(){a(!1),0!==RUser.profile.getProperty("id")&&"GUEST"!==RUser.profile.getProperty("type")?(RUser.autoSignIn(e.value),RUtils.modal.destroy(),RConstants.isMobile?RView.nav.displaySiteNav(!1):RView.nav.toggleMenu()):RUtils.ajax({url:"".concat(RConstants.apiPath,"/users/").concat(e.holderId,"?include=privileges"),headers:{"Access-Token":e.value},callback:function(t){RUser.profile.setProperty("id",t.id),RUser.profile.setProperty("userName",t.userName),RUser.profile.setProperty("type",t.type),RUser.profile.setProperty("status",t.status),RUser.profile.setProperty("email",t.email),RUser.profile.setProperty("aboutMe",t.aboutMe),RUser.profile.setProperty("url",t.profile.url),RUser.profile.setProperty("imgUrl",t.profile.imgUrl),RUser.profile.setProperty("imgixUrl",t.profile.imgixUrl),RUser.profile.setProperty("imageStatus",t.profile.profileImageStatus),RUser.profile.setProperty("displayPicOnLists",RUser.DEFAULT_DISPLAY_PIC),RUser.profile.setProperty("age",RUtils.date.getDateAge(t.profile.dateOfBirth,Date.now(),"y")),RUser.profile.setProperty("gender",t.profile.gender),RUser.profile.setProperty("country",t.profile.country.name),RUser.profile.setProperty("countryCode",t.profile.country.code),RUser.profile.setProperty("countryId",t.profile.country.id),RUser.profile.setProperty("canEditHtml",t.userPrivileges?t.userPrivileges.editHtml:RUser.DEFAULT_PRIVILEGE),RUser.profile.setProperty("canAdminBar",t.userPrivileges?t.userPrivileges.adminBar:RUser.DEFAULT_PRIVILEGE),RUser.profile.setProperty("canEditLink",t.userPrivileges?t.userPrivileges.editLink:RUser.DEFAULT_PRIVILEGE),RUtils.modal.destroy("auth"),RConstants.isMobile?RView.nav.displaySiteNav(!1):RView.nav.toggleMenu(),requestAnimationFrame(function(){RUser.autoSignIn(e.value)})}})})},l=function(){if(null===o&&(o=document.getElementById("auth__username"),s=document.getElementById("auth__password"),i=document.getElementById("auth__message")),o&&s&&i){var e=o.value,t=s.value.encodeBase64();e&&t?RUser.signIn({username:e,email:e,password:t},n):a("incorrect username or password provided")}},c=function(){r&&r.setAttribute("data-isOpen",!0);var e=document.createElement("script");e.src="https://apis.google.com/js/client:platform.js?v=".concat(Date.now()),e.async=!0,document.body.appendChild(e);var t=document.getElementById("auth__password");t&&t.addEventListener("keydown",function(e){13===e.which&&l()},!1)},p=function(e){return e=e||{},"".concat('<p class="auth__text grey center">Use one of your existing accounts to sign in. Don\'t have an account? <span id="auth__switchSignUp" class="button rnkrBlue" onclick="RUser.createSignUp(true,\'').concat(e.parseObjectAsQueryString(),"');\">Joining is easy</span>.")+'</p><p id="auth__social" class="flex"><svg id="auth__facebook" class="rsvg auth__social inlineBlock button facebookBg" onclick="RUser.signInFacebook();"><use xlink:href="#rsvg__social--facebook" href="#rsvg__social--facebook"/></svg><span id="auth__googleBtn" class="g-signin inlineBlock" data-scope="https://www.googleapis.com/auth/userinfo.email" data-clientid="890403204210-t8eic21uc86crk0lb21dio1h07dcs04o.apps.googleusercontent.com" data-cookiepolicy="single_host_origin" data-redirecturi="postmessage" data-approvalprompt="force" data-accesstype="offline" data-callback="signInGoogleCallback" data-height="tall" data-width="iconOnly" ><svg id="auth__google" class="rsvg auth__social inlineBlock button googleBg"><use xlink:href="#rsvg__social--google" href="#rsvg__social--google"/></svg></span></p><p class="auth__text grey center">or use your email account</p><input type="text" id="auth__username" placeholder="your username" class="input block center"/><input type="password" id="auth__password" placeholder="your password" class="input block center"/><p id="auth__message" class="center rnkrVRRed"></p>'+'<span id="auth__forgot" class="block center button rnkrBlue" onclick="RUser.createForgotPassword(\''.concat(e.parseObjectAsQueryString(),"');\">forgot your password?</span>")},d=function(e){"string"==typeof(e=e||{})&&(e=e.parseQueryString()),RUtils.modal.destroy(),RUtils.modal.create({id:"auth",title:"sign in to ranker",content:p(e),successButton:"sign in",closeOnClick:!1,closeOnSuccess:!1,closeOnEscape:!0,width:RConstants.isMobile?"90%":"338px",height:RConstants.isMobile?"160vw":"540px",onSuccess:l,onClose:function(){(void 0===e.unrestrictScrollOnClose||e.unrestrictScrollOnClose)&&navigator.userAgent.indexOf("Android")>-1&&(document.body.style.top=0),r&&r.setAttribute("data-isOpen",!1),o=null,s=null,i=null},onOpen:c,restrictScroll:void 0===e.restrictScroll||e.restrictScroll,window:void 0!==e.window?"string"==typeof e.window?document.getElementById(e.window):e.window:document.body})},function(e,t){t=t||{},e?d(t):(r=document.getElementById("siteNav__signIn"))&&!r.getAttribute("data-signin-bound")&&(r.setAttribute("data-signin-bound","true"),r.addEventListener("click",function(){if(RConstants.isGeoEU&&!RUser.consent.performance.parseBoolean())return zid_dataProtection.api.openConsentModal(),void RUtils.modal.create({id:"gdprVote",title:"Please update your cookie preferences",width:RConstants.isMobile?"90%":"500px",top:"".concat(RConstants.windowScrollTop+200,"px"),content:(e=document.createElement("p"),e.style.padding="10px 30px",e.style.textAlign="center",e.innerHTML="Voting and other basic site functionality requires turning on <strong>Performance Cookies</strong>.",e),showSpinner:!1,closeOnClick:!0,successButton:"sounds good"});var e;RConstants.isMobile&&document.getElementById("commonNav__hamburger").click(),requestAnimationFrame(function(){r.getAttribute("data-isOpen").parseBoolean()||d(t)})},!1))}),function(){RUtils.postMessage.handle("USER_PROFILE_READY",function(){RUtils.cookie.get("RT")&&"GUEST"!==RUser.profile.getProperty("type")||RUser.createSignIn()});var e=window.location.search;e&&"signin"===(e=e.parseQueryString()).type&&"create"===e.action&&(window.history.replaceState("clear","Update query string to clear",window.location.pathname),RUser.createSignIn(!0))}()},432:function(e,t){var r,o,s,i,a,n,l,c,p,d,u;RUser.createForgotPassword=(r=new RegExp("(.+@.+?..{2,})","i"),o=null,s=null,i=!1,a=function(e){requestAnimationFrame(function(){i=!1,s.innerHTML="boolean"!=typeof e||e?"boolean"==typeof e&&e||!e?"email has an invalid format":e:""})},n=function(){var e=document.getElementById("auth__message");requestAnimationFrame(function(){e.innerHTML=""})},l=function(e){"string"==typeof e.response&&(e=JSON.parse(e.responseText)),e.message&&"OK"!==e.status?a(e.message):(RUtils.cookie.del("_RAT"),"OK"===e.status&&requestAnimationFrame(function(){a(!1);var e=document.getElementById("auth__email");e.parentNode.removeChild(e);var t=document.getElementsByClassName("auth__text")[0];t.insertAdjacentHTML("afterend",'<button class="button button__default button--rounded button--blue" onclick="document.getElementById( \'siteNav__signIn\' ).click();" style="width:82%;margin:60px 9% 0;">return to login screen</button>'),t.outerHTML='<p class="auth__text grey center">An email has been sent with instructions for resetting your password.</p>',document.getElementById("modal__default").getElementsByClassName("modal__success")[0].style.display="none"}),i=!1)},c=function(){document.getElementsByClassName("modal__title")[0].style.marginTop="100px",o=null,s=null,i=!1},p=function(){if(!i){i=!0,null===o&&(o=document.getElementById("auth__email"),s=document.getElementById("auth__message"));var e=o.value,t=RUtils.cookie.get("_RAT");if(!e)return void a("you must provide an email address");if(!e.match(r))return void a("email has an invalid format");RUtils.ajax({method:"POST",url:"".concat(RConstants.apiPath,"/users/forgot_password"),headers:{"Access-Token":t,"Content-Type":"application/json",Accept:"application/json"},data:JSON.stringify({email:e}),error:l,callback:l})}},d=function(){var e=document.getElementById("auth__email");e&&(e.addEventListener("click",n,!1),e.addEventListener("keydown",function(e){13===e.which&&p()})),requestAnimationFrame(function(){document.getElementsByClassName("modal__title")[0].style.marginTop="100px"})},function(e){!function(e){"string"==typeof(e=e||{})&&(e=e.parseQueryString()),RUtils.modal.destroy(),RUtils.modal.destroy("auth"),RUtils.modal.create({title:"forgot your password?",content:'<p class="auth__text grey center">Enter your email address below and we will send you instructions.</p><input type="text" id="auth__email" placeholder="your email address" class="input block center"/><p id="auth__message" class="center rnkrVRRed"></p>',successButton:"reset password",closeOnClick:!1,closeOnSuccess:!1,closeOnEscape:!0,width:RConstants.isMobile?"90%":"338px",height:"".concat(RConstants.isMobile?window.innerHeight/100*95:520,"px"),onSuccess:p,onOpen:d,onClose:c,restrictScroll:void 0===e.restrictScroll||e.restrictScroll,window:void 0!==e.window?"string"==typeof e.window?document.getElementById(e.window):e.window:document.body}),RUtils.cookie.get("_RAT")||RUtils.ajax({url:"".concat(RConstants.apiPath,"/provisionaltoken"),callback:function(e){RUtils.cookie.set("_RAT",e.value,Date.now()+27e4)}})}(e=e||{})}),(u=window.location.search)&&"signin"===(u=u.parseQueryString()).type&&"forgot"===u.action&&RUser.createForgotPassword()},433:function(e,t){var r,o,s,i,a,n,l,c,p,d,u,R,y,U,g;RUser.createSignUp=(r=new RegExp(/[`~!@#\$%\^&\*\(\)\-_=\+\[\{\]\}\\\|;:\'",\<\.\>\/\?]/,"g"),o=new RegExp("(.+@.+?..{2,})","i"),s=null,i=null,a=null,n=null,l=null,c=null,p=function(e){requestAnimationFrame(function(){l.innerHTML="boolean"!=typeof e||e?"boolean"==typeof e&&e||!e?"":e:""})},d=function(e){"string"==typeof e.response&&(e=JSON.parse(e.responseText)),e.message?p(e.message.split(/:/)[1].trim()):e.token&&(RUtils.cookie.del("_RAT"),RUtils.cookie.set("RT",e.token,360),requestAnimationFrame(function(){p(!1),0!==RUser.profile.getProperty("id")&&"GUEST"!==RUser.profile.getProperty("type")?(RUser.autoSignIn(e.token),RConstants.isMobile?RView.nav.displaySiteNav(!1):RView.nav.toggleMenu(),requestAnimationFrame(function(){RUser.createWelcome(e,c)})):RUtils.ajax({url:"".concat(RConstants.apiPath,"/users/").concat(e.id,"?include=privileges"),headers:{"Access-Token":e.token},callback:function(t){RUser.profile.setProperty("id",t.id),RUser.profile.setProperty("userName",t.userName),RUser.profile.setProperty("type",t.type),RUser.profile.setProperty("status",t.status),RUser.profile.setProperty("email",t.email),RUser.profile.setProperty("aboutMe",t.aboutMe),RUser.profile.setProperty("url",t.profile.url),RUser.profile.setProperty("imgUrl",t.profile.imgUrl),RUser.profile.setProperty("imgixUrl",t.profile.imgixUrl),RUser.profile.setProperty("imageStatus",t.profile.profileImageStatus),RUser.profile.setProperty("displayPicOnLists",RUser.DEFAULT_DISPLAY_PIC),RUser.profile.setProperty("age",RUtils.date.getDateAge(t.profile.dateOfBirth,Date.now(),"y")),RUser.profile.setProperty("gender",t.profile.gender),RUser.profile.setProperty("country",t.profile.country.name),RUser.profile.setProperty("countryCode",t.profile.country.code),RUser.profile.setProperty("countryId",t.profile.country.id),RUser.profile.setProperty("canEditHtml",t.userPrivileges?t.userPrivileges.editHtml:RUser.DEFAULT_PRIVILEGE),RUser.profile.setProperty("canAdminBar",t.userPrivileges?t.userPrivileges.adminBar:RUser.DEFAULT_PRIVILEGE),RUser.profile.setProperty("canEditLink",t.userPrivileges?t.userPrivileges.editLink:RUser.DEFAULT_PRIVILEGE),RConstants.isMobile?RView.nav.displaySiteNav(!1):RView.nav.toggleMenu(),requestAnimationFrame(function(){RUser.autoSignIn(e.token),requestAnimationFrame(function(){RUser.createWelcome(e,c)})})}})}))},u=function(e){if(null===i&&(i=document.getElementById("auth__username"),a=document.getElementById("auth__email"),n=document.getElementById("auth__password"),l=document.getElementById("auth__message")),i&&a&&n&&l){var t=i.value,s=a.value,u=n.value;t.match(r)?p("username has an invalid format"):t.length<4?p("username must be at least 4 characters"):s?s.match(o)?u.length<6?p("password must be at least 6 characters"):u.length>50?p("password must be less than 50 characters"):(c=e,RUser.signUp({username:t.trim(),email:s.trim(),password:u.trim().encodeBase64()},d)):p("email has an invalid format"):p("you must provide an email address")}},R=function(){s&&s.setAttribute("data-isOpen",!0);var e=document.createElement("script");e.src="https://apis.google.com/js/client:platform.js?v=".concat(Date.now()),e.async=!0,document.body.appendChild(e);var t=document.getElementById("auth__password");t&&t.addEventListener("keydown",function(e){13===e.which&&u()},!1)},y=function(e){return e=e||{},"".concat('<p class="auth__text grey center">Use one of your existing accounts to sign up. Already have an account? <span id="auth__switchSignIn" class="button rnkrBlue" onclick="RUser.createSignIn(true,\'').concat(e.parseObjectAsQueryString(),"');\">Sign in</span>.")+'</p><p id="auth__social" class="flex"><svg id="auth__facebook" class="rsvg auth__social inlineBlock button facebookBg" onclick="RUser.signInFacebook();"><use xlink:href="#rsvg__social--facebook" href="#rsvg__social--facebook"/></svg><span id="auth__googleBtn" class="g-signin inlineBlock" data-scope="https://www.googleapis.com/auth/userinfo.email" data-clientid="890403204210-t8eic21uc86crk0lb21dio1h07dcs04o.apps.googleusercontent.com" data-cookiepolicy="single_host_origin" data-redirecturi="postmessage" data-approvalprompt="force" data-accesstype="offline" data-callback="signInGoogleCallback" data-height="tall" data-width="iconOnly" ><svg id="auth__google" class="rsvg auth__social inlineBlock button googleBg"><use xlink:href="#rsvg__social--google" href="#rsvg__social--google"/></svg></span></p><p class="auth__text grey center">or, create an account from scratch</p><input type="text" id="auth__username" placeholder="your username" class="input block center"/><input type="text" id="auth__email" placeholder="your email address" class="input block center"/><input type="password" id="auth__password" placeholder="your password" class="input block center"/><p id="auth__message" class="center rnkrVRRed"></p><p id="auth__terms" class="block center">By signing up, you agree to Ranker\'s '+'<a id="auth__termsLink" href="'.concat(RConstants.contextPath,'/app/terms.htm?ref=signup" class="button rnkrBlue" target="_blank">Terms of Service</a> and ')+'<a id="auth__termsLink" href="'.concat(RConstants.contextPath,'/app/privacypolicy.htm?ref=signup" class="button rnkrBlue" target="_blank">Privacy Policy.</a>')+"</p>"},U=function(e){"string"==typeof(e=e||{})&&(e=e.parseQueryString()),RUtils.modal.destroy(),RUtils.modal.destroy("auth"),RUtils.modal.create({id:"auth",title:"join ranker",content:y(e),classes:"modal--signup",successButton:"sign up!",closeOnClick:!1,closeOnSuccess:!1,closeOnEscape:!0,width:RConstants.isMobile?"90%":"338px",height:RConstants.isMobile?"168.93vw":"540px",onSuccess:function(){u(e)},onClose:function(){var t,r;t=void 0===e.unrestrictScrollOnClose||e.unrestrictScrollOnClose,r=document.getElementsByClassName("button__hamburger--close")[0],t&&navigator.userAgent.indexOf("Android")>-1&&(document.body.style.top=0),r&&r.click(),s&&s.setAttribute("data-isOpen",!1),i=null,a=null,n=null,l=null},onOpen:R,restrictScroll:void 0===e.restrictScroll||e.restrictScroll,window:void 0!==e.window?"string"==typeof e.window?document.getElementById(e.window):e.window:document.body})},g=function(){if(RConstants.isGeoEU&&!RUser.consent.performance.parseBoolean())return zid_dataProtection.api.openConsentModal(),void RUtils.modal.create({id:"gdprVote",title:"Please update your cookie preferences",width:RConstants.isMobile?"90%":"500px",top:"".concat(RConstants.windowScrollTop+200,"px"),content:(e=document.createElement("p"),e.style.padding="10px 30px",e.style.textAlign="center",e.innerHTML="Voting and other basic site functionality requires turning on <strong>Performance Cookies</strong>.",e),showSpinner:!1,closeOnClick:!0,successButton:"sounds good"});var e;RUser.data.setProperty("hasClickedSignUp",!0),RConstants.isMobile&&document.getElementById("commonNav__hamburger").click(),requestAnimationFrame(function(){s.getAttribute("data-isOpen").parseBoolean()||U(void 0)})},function(e,t){if("string"==typeof(t=t||{})&&(t=t.parseQueryString()),e)U(t);else{if(!(s=document.getElementById("siteNav__signUp")))return;s.addEventListener("click",g,!1),RUtils.postMessage.handle("USER_SIGNED_IN",function(){s.removeEventListener("click",g,!1)})}}),RUtils.postMessage.handle("USER_PROFILE_READY",function(){RUtils.cookie.get("RT")&&"GUEST"!==RUser.profile.getProperty("type")||RUser.createSignUp()})},434:function(e,t){var r;RUser.signInFacebook=(r=function(e){RUtils.ajax({method:"POST",url:"".concat(RConstants.contextPath,"/social/login/facebook.htm"),data:"&token=".concat(e.authResponse.accessToken),callback:function(e){if(e.error)alert(RConstants.GENERIC_ERROR),RUtils.log.event("APP AUTH","FAILED: FACEBOOK, backend API call failed.");else{var t=!1;e.signup?(RUtils.trackEvent({action:"signupDialogRPX_facebook"}),t=!0):RUtils.trackEvent({action:"loginDialogRPX_facebook"}),function(e,t){var r=RUtils.cookie.get("RT");setTimeout(function(){var o={"Access-Token":r,"Content-type":"application/json",Accept:"application/json"};"GUEST"===RUser.profile.getProperty("type")&&(o["Guest-User-Id"]=RUser.profile.getProperty("id")),RUtils.ajax({url:"".concat(RConstants.apiPath,"/users/").concat(e.userId,"?include=privileges"),headers:o,callback:function(e){RUser.profile.setProperty("id",e.id),RUser.profile.setProperty("userName",e.userName),RUser.profile.setProperty("type",e.type),RUser.profile.setProperty("status",e.status),RUser.profile.setProperty("email",e.email),RUser.profile.setProperty("aboutMe",e.aboutMe),RUser.profile.setProperty("url",e.profile.url),RUser.profile.setProperty("imgUrl",e.profile.imgUrl),RUser.profile.setProperty("imgixUrl",e.profile.imgixUrl),RUser.profile.setProperty("imageStatus",e.profile.profileImageStatus),RUser.profile.setProperty("displayPicOnLists",RUser.DEFAULT_DISPLAY_PIC),RUser.profile.setProperty("age",RUtils.date.getDateAge(e.profile.dateOfBirth,Date.now(),"y")),RUser.profile.setProperty("gender",e.profile.gender),RUser.profile.setProperty("country",e.profile.country.name),RUser.profile.setProperty("countryCode",e.profile.country.code),RUser.profile.setProperty("countryId",e.profile.country.id),RUser.profile.setProperty("canEditHtml",e.userPrivileges?e.userPrivileges.editHtml:RUser.DEFAULT_PRIVILEGE),RUser.profile.setProperty("canAdminBar",e.userPrivileges?e.userPrivileges.adminBar:RUser.DEFAULT_PRIVILEGE),RUser.profile.setProperty("canEditLink",e.userPrivileges?e.userPrivileges.editLink:RUser.DEFAULT_PRIVILEGE),t?window.location="".concat(window.location.pathname,"?type=signup&action=complete"):requestAnimationFrame(function(){RUser.autoSignIn(r),RUtils.modal.destroy()})}})},150)}(e,t)}}})},function(){FB.login(function(e){"connected"===e.status?r(e):"not_authorized"===e.status?(RUtils.log.event("APP AUTH","DENIED: User denied Facebook access"),alert("Access to Ranker was denied by Facebook, please try again.")):RUtils.log.event("APP AUTH","FAILED: Facebook")},{scope:"public_profile,email,user_birthday,user_location,user_friends"})})},435:function(e,t){RUser.signInGoogle=function(e){e.status.signed_in?RUtils.ajax({method:"POST",url:"".concat(RConstants.contextPath,"/social/login/authenticate.htm?provider=GOOGLE&code=").concat(e.code),callback:function(e){e.error?(alert(RConstants.GENERIC_ERROR),RUtils.log.event("APP AUTH","FAILED: GOOGLE, backend API call failed.")):e.signup?(RUtils.trackEvent({action:"signupDialogRPX_google"}),setTimeout(function(){window.location="".concat(window.location.pathname,"?type=signup&action=complete&suppressModal=true")},150)):(RUtils.trackEvent({action:"loginDialogRPX_google"}),function(e){var t=RUtils.cookie.get("RT");setTimeout(function(){var r={"Access-Token":t,"Content-type":"application/json",Accept:"application/json"};"GUEST"===RUser.profile.getProperty("type")&&(r["Guest-User-Id"]=RUser.profile.getProperty("id")),RUtils.ajax({url:"".concat(RConstants.apiPath,"/users/").concat(e.userId,"?include=privileges"),headers:r,callback:function(e){RUser.profile.setProperty("id",e.id),RUser.profile.setProperty("userName",e.userName),RUser.profile.setProperty("type",e.type),RUser.profile.setProperty("status",e.status),RUser.profile.setProperty("email",e.email),RUser.profile.setProperty("aboutMe",e.aboutMe),RUser.profile.setProperty("url",e.profile.url),RUser.profile.setProperty("imgUrl",e.profile.imgUrl),RUser.profile.setProperty("imgixUrl",e.profile.imgixUrl),RUser.profile.setProperty("imageStatus",e.profile.profileImageStatus),RUser.profile.setProperty("displayPicOnLists",RUser.DEFAULT_DISPLAY_PIC),RUser.profile.setProperty("age",RUtils.date.getDateAge(e.profile.dateOfBirth,Date.now(),"y")),RUser.profile.setProperty("gender",e.profile.gender),RUser.profile.setProperty("country",e.profile.country.name),RUser.profile.setProperty("countryCode",e.profile.country.code),RUser.profile.setProperty("countryId",e.profile.country.id),RUser.profile.setProperty("canEditHtml",e.userPrivileges?e.userPrivileges.editHtml:RUser.DEFAULT_PRIVILEGE),RUser.profile.setProperty("canAdminBar",e.userPrivileges?e.userPrivileges.adminBar:RUser.DEFAULT_PRIVILEGE),RUser.profile.setProperty("canEditLink",e.userPrivileges?e.userPrivileges.editLink:RUser.DEFAULT_PRIVILEGE),requestAnimationFrame(function(){RUser.autoSignIn(t),RUtils.modal.destroy()})}})},150)}(e))}}):RUtils.log.event("APP AUTH","FAILED: Google, ".concat(auth.error,"."))},window.signInGoogleCallback=RUser.signInGoogle},436:function(e,t){var r,o,s,i;RUser.createWelcome=(r=function(e){return"".concat('<p class="center"><img id="auth__profileImage" src="').concat(e.profile.imgixUrl,'?w=100&q=60&fm=pjpg&fit=crop&crop=faces" class="relative" width="100" height="100"/>')+'</p><p class="auth__text grey center"><strong class="block">This probably looks nothing like you.</strong>We\'ve assigned you a random profile image for your account. But you probably have something better. '+'Upload your own image at any time on <a href="'.concat(RConstants.isMobile?e.profile.url.replace("www.ranker","m.ranker"):e.profile.url,'">your new profile page</a>.')+"</p><p></p><style>#auth__profileImage{margin:15px 0;-webkit-border-radius:100px;border-radius:100px;}</style>"},o=function(){return{id:RUser.profile.getProperty("id"),userName:RUser.profile.getProperty("userName"),profile:{url:RUser.profile.getProperty("url"),imgixUrl:RUser.profile.getProperty("imgixUrl")}}},s=function(e,t){window.history.replaceState("welcomed","Removing welcome querystring",window.location.pathname),RUtils.modal.destroy("auth"),t.suppressCreateWindow||function(e,t){RUtils.modal.create({title:"welcome, ".concat(e.userName.toLowerCase(),"!"),content:r(e),successButton:"close",closeOnClick:!1,closeOnEscape:!0,closeOnSuccess:!0,width:RConstants.isMobile?"90%":"338px",height:"".concat(RConstants.windowHeight/100*(RConstants.isMobile?90:75),"px"),restrictScroll:void 0===t.restrictScroll||t.restrictScroll,window:void 0!==t.window?"string"==typeof t.window?document.getElementById(t.window):t.window:document.body})}(e,t)},function(e,t){"string"==typeof(t=t||{})&&(t=t.parseQueryString()),void 0===RUser.profile||e||(e=o()),e?s(e,t):RUtils.postMessage.handle("USER_PROFILE_READY",function(){e=o(),s(e,t)})}),(i=window.location.search)&&"signup"===(i=i.parseQueryString()).type&&"complete"===i.action&&RUser.createWelcome(null,void 0!==i.suppressModal&&i.suppressModal?{suppressCreateWindow:!0}:null)},437:function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o;RView.facebook={saveTimeout:null,isSaveActioned:!1,init:function(){FB.init({version:"v2.7",appId:RConstants.facebookAppId,xfbml:!0,oauth:!0,cookie:!0}),FB.Event.subscribe("edge.create",function(e){RUtils.trackSocial({network:"facebook",action:"like",target:e})}),FB.Event.subscribe("edge.remove",function(e){RUtils.trackSocial({network:"facebook",action:"unlike",target:e})}),FB.Event.subscribe("message.send",function(e){RUtils.trackSocial({network:"facebook",action:"send",target:e})}),FB.getLoginStatus(function(e){"connected"===e.status||e.status}),function(){for(var e,t=RConstants.isMobile?"click":"mouseenter",r=document.getElementsByClassName("facebook__saveWrap"),o=function(){clearTimeout(RView.facebook.saveTimeout),RView.facebook.isSaveActioned||(RView.facebook.saveTimeout=setTimeout(function(){RView.facebook.isSaveActioned=!0},500))},s=0;e=r[s];s++)e.removeEventListener(t,o,!1),e.addEventListener(t,o,!1)}()},share:function(e){e.link=(e.link.match(/\?/)?"".concat(e.link,"&"):"".concat(e.link,"?"))+(RUser.session.getProperty("asid")?"asid=".concat(RUser.session.getProperty("asid")):""),e.actions[0].link=e.link,FB.ui(e,function(e){void 0!==e&&void 0!==e.post_id?RUtils.trackSocial({network:"facebook",action:"share_complete"}):RUtils.trackSocial({network:"facebook",action:"share_fail"})})}},o=0,function e(){o++,"object"===("undefined"==typeof FB?"undefined":r(FB))?RView.facebook.init():o<15&&setTimeout(function(){e()},500)}()}});